<!-- check to see if this controller/action allow tinymce before we load the gigantor js; see application_helper -->
<% if allow_tinymce?(controller) %>
  <%= yield :tinymce %>
<% end %>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js" type="text/javascript"></script>
<!-- if user has googleapis blocked for some reason we need a fallback -->
<script type="text/javascript">
  if (typeof jQuery == 'undefined') {
    document.write(unescape("%3Cscript src='/javascripts/jquery.min.js' type='text/javascript'%3E%3C/script%3E"));
    document.write(unescape("%3Cscript src='/javascripts/jquery-ui.min.js' type='text/javascript'%3E%3C/script%3E"));
  }
</script>

<% if Rails.env.test? %>
  <!--
    The autocomplete dropdown for a field (generated by jquery.tokeninput) will only appear
    if the field has focus. The jQuery :focus pseudo-selector returns the focused element
    on the page, but only if the browser itself has focus, and we're running tests in a
    headless browser which is always out of focus.

    We get around this by forcing jQuery to use its own selector engine instead of
    the browser's.

    By Matthew O'Riordan (http://mattheworiordan.com).
    License: IDGAF.

    https://github.com/mattheworiordan/jquery-focus-selenium-webkit-fix
  -->
  <script type="text/javascript">
    jQuery.find.selectors.filters.focus = function(elem) {
      var doc = elem.ownerDocument;
      return elem === doc.activeElement && !!(elem.type || elem.href);
    }
  </script>
<% end %>

<script type="text/javascript">$j = jQuery.noConflict();</script>
<%= javascript_include_tag "jquery.scrollTo.min", "jquery.livequery.min", "rails", "application", "bootstrap/bootstrap-dropdown.min", "jquery-shuffle", "jquery.tokeninput.min", "jquery.trap.min", "ao3modal.min", "jquery.cookie", "filters.min", skip_pipeline: true %>

<% if allow_tinymce?(controller) %>
  <%= yield :tinymce_init %>
<% end %>

<%= yield :footer_js %>

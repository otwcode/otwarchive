<!--Descriptive page name, messages and instructions-->
<% if params[:show] != "rejected" %>
  <h2 class="heading"><%= ts("Creator Invitations") %></h2>
<% else %>
  <h2 class="heading"><%= ts("Rejected Creator Invitations") %></h2>
<% end %>
<!--/descriptions-->

<!--subnav-->
<ul class="navigation actions" role="navigation">
  <li><%= span_if_current ts("Awaiting Approval"), user_creatorships_path(@user), !params[:show] %></li>
  <li><%= span_if_current ts("Rejected"), user_creatorships_path(@user, show: "rejected") %></li>
</ul>
<!--/subnav-->

<!--main content-->
<% if @creatorships.blank? %>
  <p><%= ts("No creator invitations found.") %></p>
<% else %>
  <%= will_paginate @creatorships %>
  <%= form_tag user_creatorships_path(@user, page: params[:page]), method: :put do %>
    <fieldset class="actions">
      <legend><%= ts("Mass Edit Options") %></legend>

      <ul>
        <li><a class="check_all"><%= ts("Select All") %></a></li>
        <li><a class="check_none"><%= ts("Select None") %></a></li>
        <li><%= submit_tag ts("Accept"), name: "accept" %></li>
        <% if params[:show] != "rejected" %>
          <li><%= submit_tag ts("Reject"), name: "reject" %></li>
        <% end %>
        <li><%= submit_tag ts("Delete"), name: "delete" %></li>
      </ul>
    </fieldset>

    <fieldset class="creatorships">
      <legend><%= ts("List of Creator Invitations") %></legend>

      <table>
        <tr>
          <th><%= ts("Creation") %></th>
          <th><%= ts("Type") %></th>
          <th><%= ts("Invited Pseud") %></th>
          <th><%= ts("Date") %></th>
          <th><%= ts("Selected?") %></th>
        </tr>
        <%= collection_check_boxes "", :selected, @creatorships, :id, :id do |builder| %>
          <% creatorship = builder.object %>
          <% next unless (creation = creatorship.creation) %>
          <tr>
            <td><%= link_to title_for_creation(creation), creation %></td>
            <td><%= creatorship.creation_type %></td>
            <td><%= creatorship.pseud.name %></td>
            <td><%= set_format_for_date(creatorship.created_at) %></td>
            <td><%= builder.check_box %></td>
          </tr>
        <% end %>
      </table>
    </fieldset>

    <fieldset class="actions">
      <legend><%= ts("Mass Edit Options") %></legend>

      <ul>
        <li><a class="check_all"><%= ts("Select All") %></a></li>
        <li><a class="check_none"><%= ts("Select None") %></a></li>
        <li><%= submit_tag ts("Accept"), name: "accept" %></li>
        <% if params[:show] != "rejected" %>
          <li><%= submit_tag ts("Reject"), name: "reject" %></li>
        <% end %>
        <li><%= submit_tag ts("Delete"), name: "delete" %></li>
      </ul>
    </fieldset>
  <% end %>
  <%= will_paginate @creatorships %>
<% end %>
<!--/main content-->

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>RSpec results</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Expires" content="-1" />
  <meta http-equiv="Pragma" content="no-cache" />
  <style type="text/css">
  body {
    margin: 0;
    padding: 0;
    background: #fff;
    font-size: 80%;
  }
  </style>
  <script type="text/javascript">
    // <![CDATA[

function addClass(element_id, classname) {
  document.getElementById(element_id).className += (" " + classname);
}

function removeClass(element_id, classname) {
  var elem = document.getElementById(element_id);
  var classlist = elem.className.replace(classname,'');
  elem.className = classlist;
}

function moveProgressBar(percentDone) {
  document.getElementById("rspec-header").style.width = percentDone +"%";
}

function makeRed(element_id) {
  removeClass(element_id, 'passed');
  removeClass(element_id, 'not_implemented');
  addClass(element_id,'failed');
}

function makeYellow(element_id) {
  var elem = document.getElementById(element_id);
  if (elem.className.indexOf("failed") == -1) {  // class doesn't includes failed
    if (elem.className.indexOf("not_implemented") == -1) { // class doesn't include not_implemented
      removeClass(element_id, 'passed');
      addClass(element_id,'not_implemented');
    }
  }
}

function apply_filters() {
  var passed_filter = document.getElementById('passed_checkbox').checked;
  var failed_filter = document.getElementById('failed_checkbox').checked;
  var pending_filter = document.getElementById('pending_checkbox').checked;

  assign_display_style("example passed", passed_filter);
  assign_display_style("example failed", failed_filter);
  assign_display_style("example not_implemented", pending_filter);

  assign_display_style_for_group("example_group passed", passed_filter);
  assign_display_style_for_group("example_group not_implemented", pending_filter, pending_filter || passed_filter);
  assign_display_style_for_group("example_group failed", failed_filter, failed_filter || pending_filter || passed_filter);
}

function get_display_style(display_flag) {
  var style_mode = 'none';
  if (display_flag == true) {
    style_mode = 'block';
  }
  return style_mode;
}

function assign_display_style(classname, display_flag) {
  var style_mode = get_display_style(display_flag);
  var elems = document.getElementsByClassName(classname)
  for (var i=0; i<elems.length;i++) {
    elems[i].style.display = style_mode;
  }
}

function assign_display_style_for_group(classname, display_flag, subgroup_flag) {
  var display_style_mode = get_display_style(display_flag);
  var subgroup_style_mode = get_display_style(subgroup_flag);
  var elems = document.getElementsByClassName(classname)
  for (var i=0; i<elems.length;i++) {
    var style_mode = display_style_mode;
    if ((display_flag != subgroup_flag) && (elems[i].getElementsByTagName('dt')[0].innerHTML.indexOf(", ") != -1)) {
      elems[i].style.display = subgroup_style_mode;
    } else {
      elems[i].style.display = display_style_mode;
    }
  }
}

    // ]]>
  </script>
  <style type="text/css">
#rspec-header {
  background: #65C400; color: #fff; height: 4em;
}

.rspec-report h1 {
  margin: 0px 10px 0px 10px;
  padding: 10px;
  font-family: "Lucida Grande", Helvetica, sans-serif;
  font-size: 1.8em;
  position: absolute;
}

#label {
  float:left;
}

#display-filters {
  float:left;
  padding: 28px 0 0 40%;
  font-family: "Lucida Grande", Helvetica, sans-serif;
}

#summary {
  float:right;
  padding: 5px 10px;
  font-family: "Lucida Grande", Helvetica, sans-serif;
  text-align: right;
}

#summary p {
  margin: 0 0 0 2px;
}

#summary #totals {
  font-size: 1.2em;
}

.example_group {
  margin: 0 10px 5px;
  background: #fff;
}

dl {
  margin: 0; padding: 0 0 5px;
  font: normal 11px "Lucida Grande", Helvetica, sans-serif;
}

dt {
  padding: 3px;
  background: #65C400;
  color: #fff;
  font-weight: bold;
}

dd {
  margin: 5px 0 5px 5px;
  padding: 3px 3px 3px 18px;
}

dd .duration {
  padding-left: 5px;
  text-align: right;
  right: 0px;
  float:right;
}

dd.example.passed {
  border-left: 5px solid #65C400;
  border-bottom: 1px solid #65C400;
  background: #DBFFB4; color: #3D7700;
}

dd.example.not_implemented {
  border-left: 5px solid #FAF834;
  border-bottom: 1px solid #FAF834;
  background: #FCFB98; color: #131313;
}

dd.example.pending_fixed {
  border-left: 5px solid #0000C2;
  border-bottom: 1px solid #0000C2;
  color: #0000C2; background: #D3FBFF;
}

dd.example.failed {
  border-left: 5px solid #C20000;
  border-bottom: 1px solid #C20000;
  color: #C20000; background: #FFFBD3;
}


dt.not_implemented {
  color: #000000; background: #FAF834;
}

dt.pending_fixed {
  color: #FFFFFF; background: #C40D0D;
}

dt.failed {
  color: #FFFFFF; background: #C40D0D;
}


#rspec-header.not_implemented {
  color: #000000; background: #FAF834;
}

#rspec-header.pending_fixed {
  color: #FFFFFF; background: #C40D0D;
}

#rspec-header.failed {
  color: #FFFFFF; background: #C40D0D;
}


.backtrace {
  color: #000;
  font-size: 12px;
}

a {
  color: #BE5C00;
}

/* Ruby code, style similar to vibrant ink */
.ruby {
  font-size: 12px;
  font-family: monospace;
  color: white;
  background-color: black;
  padding: 0.1em 0 0.2em 0;
}

.ruby .keyword { color: #FF6600; }
.ruby .constant { color: #339999; }
.ruby .attribute { color: white; }
.ruby .global { color: white; }
.ruby .module { color: white; }
.ruby .class { color: white; }
.ruby .string { color: #66FF00; }
.ruby .ident { color: white; }
.ruby .method { color: #FFCC00; }
.ruby .number { color: white; }
.ruby .char { color: white; }
.ruby .comment { color: #9933CC; }
.ruby .symbol { color: white; }
.ruby .regex { color: #44B4CC; }
.ruby .punct { color: white; }
.ruby .escape { color: white; }
.ruby .interp { color: white; }
.ruby .expr { color: white; }

.ruby .offending { background-color: gray; }
.ruby .linenum {
  width: 75px;
  padding: 0.1em 1em 0.2em 0;
  color: #000000;
  background-color: #FFFBD3;
}

  </style>
</head>
<body>
<div class="rspec-report">

<div id="rspec-header">
  <div id="label">
    <h1>RSpec Code Examples</h1>
  </div>

  <div id="display-filters">
    <input id="passed_checkbox" name="passed_checkbox" type="checkbox" checked onchange="apply_filters()" value="1"> <label for="passed_checkbox">Passed</label>
    <input id="failed_checkbox" name="failed_checkbox" type="checkbox" checked onchange="apply_filters()" value="2"> <label for="failed_checkbox">Failed</label>
    <input id="pending_checkbox" name="pending_checkbox" type="checkbox" checked onchange="apply_filters()" value="3"> <label for="pending_checkbox">Pending</label>
  </div>

  <div id="summary">
    <p id="totals">&nbsp;</p>
    <p id="duration">&nbsp;</p>
  </div>
</div>


<div class="results">
<div id="div_group_1" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_1" class="passed">AutocompleteController</dt>
  </dl>
</div>
<div id="div_group_2" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_2" class="passed">do_tag</dt>
    <script type="text/javascript">moveProgressBar('0.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should only return matching tags</span><span class='duration'>2.05594s</span></dd>
  </dl>
</div>
<div id="div_group_3" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_3" class="passed">UsersController</dt>
  </dl>
</div>
<div id="div_group_4" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_4" class="passed">create</dt>
  </dl>
</div>
<div id="div_group_5" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_5" class="passed">with valid parameters</dt>
    <script type="text/javascript">moveProgressBar('0.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should be successful</span><span class='duration'>1.76441s</span></dd>
  </dl>
</div>
<div id="div_group_6" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_6" class="passed">WorksController</dt>
  </dl>
</div>
<div id="div_group_7" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_7" class="passed">index</dt>
    <script type="text/javascript">moveProgressBar('0.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should return the work</span><span class='duration'>1.99558s</span></dd>
  </dl>
</div>
<div id="div_group_8" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_8" class="passed">without caching</dt>
    <script type="text/javascript">moveProgressBar('0.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should return the result with different works the second time</span><span class='duration'>1.18863s</span></dd>
  </dl>
</div>
<div id="div_group_9" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_9" class="passed">with caching</dt>
    <script type="text/javascript">moveProgressBar('0.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should return the same result the second time when a new work is created within the expiration time</span><span class='duration'>1.10831s</span></dd>
  </dl>
</div>
<div id="div_group_10" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_10" class="passed">with an owner tag</dt>
    <script type="text/javascript">moveProgressBar('0.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should only get works under that tag</span><span class='duration'>1.56120s</span></dd>
    <script type="text/javascript">moveProgressBar('1.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should show different results on second page</span><span class='duration'>1.26379s</span></dd>
  </dl>
</div>
<div id="div_group_11" class="example_group passed">
  <dl style="margin-left: 60px;">
  <dt id="example_group_11" class="passed">with restricted works</dt>
    <script type="text/javascript">moveProgressBar('1.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not show restricted works to guests</span><span class='duration'>1.73268s</span></dd>
    <script type="text/javascript">moveProgressBar('1.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should show restricted works to logged-in users</span><span class='duration'>1.96175s</span></dd>
  </dl>
</div>
<div id="div_group_12" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_12" class="passed">WorksHelper</dt>
  </dl>
</div>
<div id="div_group_13" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_13" class="passed">#tweet_text</dt>
  </dl>
</div>
<div id="div_group_14" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_14" class="passed">for an unrevealed work</dt>
    <script type="text/javascript">moveProgressBar('1.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should say that it&#x27;s a mystery work</span><span class='duration'>0.82894s</span></dd>
  </dl>
</div>
<div id="div_group_15" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_15" class="passed">for an anonymous work</dt>
    <script type="text/javascript">moveProgressBar('1.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not include the author&#x27;s name</span><span class='duration'>0.86227s</span></dd>
  </dl>
</div>
<div id="div_group_16" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_16" class="passed">for a multifandom work</dt>
    <script type="text/javascript">moveProgressBar('1.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not try to include all the fandoms</span><span class='duration'>1.04897s</span></dd>
  </dl>
</div>
<div id="div_group_17" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_17" class="passed">for a revealed, non-anon work with one fandom</dt>
    <script type="text/javascript">makeRed('rspec-header');</script>
    <script type="text/javascript">makeRed('div_group_17');</script>
    <script type="text/javascript">makeRed('example_group_17');</script>
    <script type="text/javascript">moveProgressBar('2.1');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should include all info</span>
      <span class="duration">0.87622s</span>
      <div class="failure" id="failure_1">
        <div class="message"><pre>undefined method `name&#x27; for #&lt;Array:0x0000000a77bfa0&gt;</pre></div>
        <div class="backtrace"><pre>./spec/helpers/works_helper_spec.rb:38:in `block (4 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">36</span>    context "for a revealed, non-anon work with one fandom" do
<span class="linenum">37</span>      it "should include all info" do
<span class="offending"><span class="linenum">38</span>        tweet_text(@work).should == "My title by test pseud #{@work.authors.name} - Testing"</span>
<span class="linenum">39</span>      end
<span class="linenum">40</span>    end
<span class="linenum">41</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_18" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_18" class="passed">Fandom</dt>
  </dl>
</div>
<div id="div_group_19" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_19" class="passed">behaves like an autocompleting tag</dt>
  </dl>
</div>
<div id="div_group_20" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_20" class="passed">#autocomplete_prefixes</dt>
    <script type="text/javascript">moveProgressBar('2.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should return an array that includes the class name</span><span class='duration'>0.00461s</span></dd>
  </dl>
</div>
<div id="div_group_21" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_21" class="passed">#autocomplete_search_string</dt>
    <script type="text/javascript">moveProgressBar('2.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should be equal to its name</span><span class='duration'>0.00458s</span></dd>
  </dl>
</div>
<div id="div_group_22" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_22" class="passed">#autocomplete_value</dt>
    <script type="text/javascript">moveProgressBar('2.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should include id and name</span><span class='duration'>0.00487s</span></dd>
  </dl>
</div>
<div id="div_group_23" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_23" class="passed">#autocomplete_score</dt>
    <script type="text/javascript">moveProgressBar('2.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should return zero</span><span class='duration'>0.00435s</span></dd>
  </dl>
</div>
<div id="div_group_24" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_24" class="passed">#add_to_autocomplete</dt>
    <script type="text/javascript">makeYellow('div_group_24');</script>
    <script type="text/javascript">makeYellow('example_group_24');</script>
    <script type="text/javascript">moveProgressBar('2.9');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should add itself to the autocomplete (PENDING: Not yet implemented)</span></dd>
  </dl>
</div>
<div id="div_group_25" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_25" class="passed">#remove_from_autocomplete</dt>
    <script type="text/javascript">makeYellow('div_group_25');</script>
    <script type="text/javascript">makeYellow('example_group_25');</script>
    <script type="text/javascript">moveProgressBar('3.0');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should remove itself from the autocomplete (PENDING: Not yet implemented)</span></dd>
  </dl>
</div>
<div id="div_group_26" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_26" class="passed">Collection</dt>
  </dl>
</div>
<div id="div_group_27" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_27" class="passed">behaves like an autocompletable class with a title</dt>
    <script type="text/javascript">moveProgressBar('3.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should have a search string composed of its name and title</span><span class='duration'>0.31011s</span></dd>
  </dl>
</div>
<div id="div_group_28" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_28" class="passed">Collectible</dt>
    <script type="text/javascript">moveProgressBar('3.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should not be put into a nonexistent collection</span><span class='duration'>0.94983s</span></dd>
  </dl>
</div>
<div id="div_group_29" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_29" class="passed">being posted to a collection</dt>
  </dl>
</div>
<div id="div_group_30" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_30" class="passed">once added</dt>
    <script type="text/javascript">moveProgressBar('3.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should be in that collection</span><span class='duration'>1.78035s</span></dd>
    <script type="text/javascript">moveProgressBar('3.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should be removable</span><span class='duration'>1.47985s</span></dd>
  </dl>
</div>
<div id="div_group_31" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_31" class="passed">which is unrevealed</dt>
    <script type="text/javascript">moveProgressBar('3.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should be unrevealed</span><span class='duration'>1.10218s</span></dd>
  </dl>
</div>
<div id="div_group_32" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_32" class="passed">and when the collection is no longer unrevealed</dt>
    <script type="text/javascript">moveProgressBar('4.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not be unrevealed</span><span class='duration'>1.72193s</span></dd>
  </dl>
</div>
<div id="div_group_33" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_33" class="passed">when the work is removed from the collection</dt>
    <script type="text/javascript">moveProgressBar('4.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not be unrevealed</span><span class='duration'>1.68890s</span></dd>
  </dl>
</div>
<div id="div_group_34" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_34" class="passed">when the work&#x27;s collection item is individually changed</dt>
    <script type="text/javascript">makeRed('div_group_34');</script>
    <script type="text/javascript">makeRed('example_group_34');</script>
    <script type="text/javascript">moveProgressBar('4.3');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should no longer be unrevealed</span>
      <span class="duration">1.24755s</span>
      <div class="failure" id="failure_2">
        <div class="message"><pre>expected: non-true value
     got: true</pre></div>
        <div class="backtrace"><pre>./spec/lib/collectible_spec.rb:95:in `block (6 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">93</span>          
<span class="linenum">94</span>          it "should no longer be #{state}" do
<span class="offending"><span class="linenum">95</span>            work.send("in_#{state == 'anonymous' ? 'anon' : state}_collection").should_not be_true</span>
<span class="linenum">96</span>          end
<span class="linenum">97</span>        end
<span class="linenum">98</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_35" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_35" class="passed">which is anonymous</dt>
    <script type="text/javascript">moveProgressBar('4.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should be anonymous</span><span class='duration'>1.51782s</span></dd>
  </dl>
</div>
<div id="div_group_36" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_36" class="passed">and when the collection is no longer anonymous</dt>
    <script type="text/javascript">moveProgressBar('4.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not be anonymous</span><span class='duration'>1.37258s</span></dd>
  </dl>
</div>
<div id="div_group_37" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_37" class="passed">when the work is removed from the collection</dt>
    <script type="text/javascript">moveProgressBar('4.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not be anonymous</span><span class='duration'>1.59610s</span></dd>
  </dl>
</div>
<div id="div_group_38" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_38" class="passed">when the work&#x27;s collection item is individually changed</dt>
    <script type="text/javascript">makeRed('div_group_38');</script>
    <script type="text/javascript">makeRed('example_group_38');</script>
    <script type="text/javascript">moveProgressBar('5.0');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should no longer be anonymous</span>
      <span class="duration">1.28935s</span>
      <div class="failure" id="failure_3">
        <div class="message"><pre>expected: non-true value
     got: true</pre></div>
        <div class="backtrace"><pre>./spec/lib/collectible_spec.rb:95:in `block (6 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">93</span>          
<span class="linenum">94</span>          it "should no longer be #{state}" do
<span class="offending"><span class="linenum">95</span>            work.send("in_#{state == 'anonymous' ? 'anon' : state}_collection").should_not be_true</span>
<span class="linenum">96</span>          end
<span class="linenum">97</span>        end
<span class="linenum">98</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_39" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_39" class="passed">HtmlCleaner</dt>
  </dl>
</div>
<div id="div_group_40" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_40" class="passed">TagStack</dt>
  </dl>
</div>
<div id="div_group_41" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_41" class="passed">inside paragraph?</dt>
    <script type="text/javascript">moveProgressBar('5.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should return false</span><span class='duration'>0.00378s</span></dd>
    <script type="text/javascript">moveProgressBar('5.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should recognise paragraph in combination with i</span><span class='duration'>0.00356s</span></dd>
    <script type="text/javascript">moveProgressBar('5.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should recognise paragraph in combination with i</span><span class='duration'>0.00422s</span></dd>
    <script type="text/javascript">moveProgressBar('5.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should recognise single paragraph</span><span class='duration'>0.00412s</span></dd>
  </dl>
</div>
<div id="div_group_42" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_42" class="passed">open_paragraph_tags</dt>
    <script type="text/javascript">moveProgressBar('5.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should open tags</span><span class='duration'>0.00495s</span></dd>
    <script type="text/javascript">moveProgressBar('5.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should open tags</span><span class='duration'>0.00419s</span></dd>
    <script type="text/javascript">moveProgressBar('6.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle attributes</span><span class='duration'>0.00539s</span></dd>
    <script type="text/javascript">moveProgressBar('6.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should ignore text nodes</span><span class='duration'>0.00618s</span></dd>
    <script type="text/javascript">moveProgressBar('6.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should return empty string when not inside paragraph</span><span class='duration'>0.00478s</span></dd>
  </dl>
</div>
<div id="div_group_43" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_43" class="passed">close_paragraph_tags</dt>
    <script type="text/javascript">moveProgressBar('6.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should close tags</span><span class='duration'>0.00981s</span></dd>
    <script type="text/javascript">moveProgressBar('6.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should close tags</span><span class='duration'>0.00456s</span></dd>
    <script type="text/javascript">moveProgressBar('6.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle attributes</span><span class='duration'>0.00433s</span></dd>
    <script type="text/javascript">moveProgressBar('7.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should ignore text nodes</span><span class='duration'>0.00416s</span></dd>
    <script type="text/javascript">moveProgressBar('7.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should return empty string when not inside paragraph</span><span class='duration'>0.00386s</span></dd>
  </dl>
</div>
<div id="div_group_44" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_44" class="passed">close_and_pop_last</dt>
    <script type="text/javascript">moveProgressBar('7.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should close tags</span><span class='duration'>0.00401s</span></dd>
  </dl>
</div>
<div id="div_group_45" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_45" class="passed">close_unclosed_tag</dt>
    <script type="text/javascript">moveProgressBar('7.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should close tag at end of line</span><span class='duration'>0.00767s</span></dd>
    <script type="text/javascript">moveProgressBar('7.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch self-closing br tag</span><span class='duration'>0.00683s</span></dd>
    <script type="text/javascript">moveProgressBar('7.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch self-closing col tag</span><span class='duration'>0.00558s</span></dd>
    <script type="text/javascript">moveProgressBar('8.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch self-closing hr tag</span><span class='duration'>0.00401s</span></dd>
    <script type="text/javascript">moveProgressBar('8.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch self-closing img tag</span><span class='duration'>0.00367s</span></dd>
    <script type="text/javascript">moveProgressBar('8.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch col tags that don&#x27;t go inside p tags</span><span class='duration'>0.00432s</span></dd>
    <script type="text/javascript">moveProgressBar('8.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch colgroup tags that don&#x27;t go inside p tags</span><span class='duration'>0.00419s</span></dd>
    <script type="text/javascript">moveProgressBar('8.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch dl tags that don&#x27;t go inside p tags</span><span class='duration'>0.00445s</span></dd>
    <script type="text/javascript">moveProgressBar('8.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch h1 tags that don&#x27;t go inside p tags</span><span class='duration'>0.00395s</span></dd>
    <script type="text/javascript">moveProgressBar('9.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch h2 tags that don&#x27;t go inside p tags</span><span class='duration'>0.00333s</span></dd>
    <script type="text/javascript">moveProgressBar('9.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch h3 tags that don&#x27;t go inside p tags</span><span class='duration'>0.00549s</span></dd>
    <script type="text/javascript">moveProgressBar('9.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch h4 tags that don&#x27;t go inside p tags</span><span class='duration'>0.00554s</span></dd>
    <script type="text/javascript">moveProgressBar('9.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch h5 tags that don&#x27;t go inside p tags</span><span class='duration'>0.00311s</span></dd>
    <script type="text/javascript">moveProgressBar('9.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch h6 tags that don&#x27;t go inside p tags</span><span class='duration'>0.00334s</span></dd>
    <script type="text/javascript">moveProgressBar('9.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch hr tags that don&#x27;t go inside p tags</span><span class='duration'>0.00477s</span></dd>
    <script type="text/javascript">moveProgressBar('10.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch ol tags that don&#x27;t go inside p tags</span><span class='duration'>0.00662s</span></dd>
    <script type="text/javascript">moveProgressBar('10.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch p tags that don&#x27;t go inside p tags</span><span class='duration'>0.00634s</span></dd>
    <script type="text/javascript">moveProgressBar('10.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch pre tags that don&#x27;t go inside p tags</span><span class='duration'>0.00731s</span></dd>
    <script type="text/javascript">moveProgressBar('10.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch table tags that don&#x27;t go inside p tags</span><span class='duration'>0.00623s</span></dd>
    <script type="text/javascript">moveProgressBar('10.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch ul tags that don&#x27;t go inside p tags</span><span class='duration'>0.00698s</span></dd>
    <script type="text/javascript">moveProgressBar('10.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should close tag before next opening tag</span><span class='duration'>0.00751s</span></dd>
    <script type="text/javascript">moveProgressBar('11.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should close tag before next closing tag</span><span class='duration'>0.00693s</span></dd>
    <script type="text/javascript">moveProgressBar('11.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should close tag before next closing tag</span><span class='duration'>0.00568s</span></dd>
    <script type="text/javascript">moveProgressBar('11.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should close second opening tag</span><span class='duration'>0.00485s</span></dd>
    <script type="text/javascript">moveProgressBar('11.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should only close specified tag</span><span class='duration'>0.00381s</span></dd>
  </dl>
</div>
<div id="div_group_46" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_46" class="passed">sanitize_value</dt>
  </dl>
</div>
<div id="div_group_47" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_47" class="passed">:content</dt>
    <script type="text/javascript">makeRed('div_group_47');</script>
    <script type="text/javascript">makeRed('example_group_47');</script>
    <script type="text/javascript">moveProgressBar('11.6');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should keep html</span>
      <span class="duration">0.01193s</span>
      <div class="failure" id="failure_4">
        <div class="message"><pre>expected: &quot;world&quot;
     got: &quot;&lt;p&gt;world&lt;/p&gt;&quot; (using ==)</pre></div>
        <div class="backtrace"><pre>./spec/lib/html_cleaner_spec.rb:155:in `block (4 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">153</span>        doc = Nokogiri::HTML.fragment(result)
<span class="linenum">154</span>        doc.xpath(".//em").children.to_s.strip.should == "hello"
<span class="offending"><span class="linenum">155</span>        doc.xpath(".//blockquote").children.to_s.strip.should == "world"</span>
<span class="linenum">156</span>      end
<span class="linenum">157</span>
<span class="linenum">158</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('11.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should keep valid unicode chars as is</span><span class='duration'>0.00798s</span></dd>
    <script type="text/javascript">moveProgressBar('11.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow classes with letters, numbers and hyphens</span><span class='duration'>0.00864s</span></dd>
    <script type="text/javascript">moveProgressBar('12.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow not allow classes starting with numbers</span><span class='duration'>0.00994s</span></dd>
    <script type="text/javascript">moveProgressBar('12.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow not allow classes starting with hyphens</span><span class='duration'>0.00867s</span></dd>
    <script type="text/javascript">moveProgressBar('12.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow not allow classes with special characters</span><span class='duration'>0.00704s</span></dd>
    <script type="text/javascript">moveProgressBar('12.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow two classes</span><span class='duration'>0.00820s</span></dd>
    <script type="text/javascript">moveProgressBar('12.7');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should allow youtube embeds</span>
      <span class="duration">0.00897s</span>
      <div class="failure" id="failure_5">
        <div class="message"><pre>expected: &quot;&lt;iframe width=\&quot;560\&quot; height=\&quot;315\&quot; src=\&quot;http://www.youtube.com/embed/123\&quot; frameborder=\&quot;0\&quot;&gt;&lt;/iframe&gt;&quot;
     got: &quot;&lt;p&gt;\n  &lt;iframe width=\&quot;560\&quot; height=\&quot;315\&quot; src=\&quot;http://www.youtube.com/embed/123\&quot; frameborder=\&quot;0\&quot;&gt;&lt;/iframe&gt;\n&lt;/p&gt;&quot; (using ==)
Diff:
@@ -1,2 +1,4 @@
-&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;http://www.youtube.com/embed/123&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;
+&lt;p&gt;
+  &lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;http://www.youtube.com/embed/123&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;
+&lt;/p&gt;
</pre></div>
        <div class="backtrace"><pre>./spec/lib/html_cleaner_spec.rb:197:in `block (4 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">195</span>        html = '<iframe width="560" height="315" src="http://www.youtube.com/embed/123" frameborder="0"></iframe>'
<span class="linenum">196</span>        result = sanitize_value(:content, html)
<span class="offending"><span class="linenum">197</span>        result.should == html</span>
<span class="linenum">198</span>      end
<span class="linenum">199</span>
<span class="linenum">200</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('12.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not allow iframes with unknown source</span><span class='duration'>0.00623s</span></dd>
    <script type="text/javascript">moveProgressBar('13.1');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should allow google player embeds</span>
      <span class="duration">0.00774s</span>
      <div class="failure" id="failure_6">
        <div class="message"><pre>expected: &quot;&lt;embed type=\&quot;application/x-shockwave-flash\&quot; flashvars=\&quot;audioUrl=http://dl.dropbox.com/u/123/foo.mp3\&quot; src=\&quot;http://www.google.com/reader/ui/123-audio-player.swf\&quot; width=\&quot;400\&quot; height=\&quot;27\&quot; allowscriptaccess=\&quot;never\&quot; allownetworking=\&quot;internal\&quot;&gt;&lt;/embed&gt;&quot;
     got: &quot;&lt;p&gt;\n  &lt;embed type=\&quot;application/x-shockwave-flash\&quot; flashvars=\&quot;audioUrl=http://dl.dropbox.com/u/123/foo.mp3\&quot; src=\&quot;http://www.google.com/reader/ui/123-audio-player.swf\&quot; width=\&quot;400\&quot; height=\&quot;27\&quot; allowscriptaccess=\&quot;never\&quot; allownetworking=\&quot;internal\&quot;&gt;&lt;/embed&gt;\n&lt;/p&gt;&quot; (using ==)
Diff:
@@ -1,2 +1,4 @@
-&lt;embed type=&quot;application/x-shockwave-flash&quot; flashvars=&quot;audioUrl=http://dl.dropbox.com/u/123/foo.mp3&quot; src=&quot;http://www.google.com/reader/ui/123-audio-player.swf&quot; width=&quot;400&quot; height=&quot;27&quot; allowscriptaccess=&quot;never&quot; allownetworking=&quot;internal&quot;&gt;&lt;/embed&gt;
+&lt;p&gt;
+  &lt;embed type=&quot;application/x-shockwave-flash&quot; flashvars=&quot;audioUrl=http://dl.dropbox.com/u/123/foo.mp3&quot; src=&quot;http://www.google.com/reader/ui/123-audio-player.swf&quot; width=&quot;400&quot; height=&quot;27&quot; allowscriptaccess=&quot;never&quot; allownetworking=&quot;internal&quot;&gt;&lt;/embed&gt;
+&lt;/p&gt;
</pre></div>
        <div class="backtrace"><pre>./spec/lib/html_cleaner_spec.rb:209:in `block (4 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">207</span>        html = '<embed type="application/x-shockwave-flash" flashvars="audioUrl=http://dl.dropbox.com/u/123/foo.mp3" src="http://www.google.com/reader/ui/123-audio-player.swf" width="400" height="27" allowscriptaccess="never" allownetworking="internal"></embed>'
<span class="linenum">208</span>        result = sanitize_value(:content, html)
<span class="offending"><span class="linenum">209</span>        result.should == html</span>
<span class="linenum">210</span>      end
<span class="linenum">211</span>
<span class="linenum">212</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('13.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not allow embeds with unknown source</span><span class='duration'>0.00640s</span></dd>
    <script type="text/javascript">moveProgressBar('13.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip xss tags: &#x27;&#x27;;!--&quot;&lt;XSS&gt;=&amp;{()}</span><span class='duration'>0.26662s</span></dd>
    <script type="text/javascript">moveProgressBar('13.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip xss tags: &lt;XSS STYLE=&quot;behavior: url(xss.htc);&quot;&gt;</span><span class='duration'>0.00645s</span></dd>
    <script type="text/javascript">moveProgressBar('13.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip script tags: &lt;SCRIPT SRC=http://ha.ckers.org/xss.js&gt;&lt;/SCRIPT&gt;</span><span class='duration'>0.00607s</span></dd>
    <script type="text/javascript">moveProgressBar('13.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip script tags: &lt;&lt;SCRIPT&gt;alert(&quot;XSS&quot;);//&lt;&lt;/SCRIPT&gt;</span><span class='duration'>0.00755s</span></dd>
    <script type="text/javascript">moveProgressBar('14.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip script tags: &lt;SCRIPT SRC=http://ha.ckers.org/xss.js?&lt;B&gt;</span><span class='duration'>0.00703s</span></dd>
    <script type="text/javascript">moveProgressBar('14.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip script tags: &lt;SCRIPT SRC=//ha.ckers.org/.j&gt;</span><span class='duration'>0.00639s</span></dd>
    <script type="text/javascript">moveProgressBar('14.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip script tags: &lt;SCRIPT&gt;alert(/XSS/.source)&lt;/SCRIPT&gt;</span><span class='duration'>0.04480s</span></dd>
    <script type="text/javascript">moveProgressBar('14.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip script tags: &lt;/TITLE&gt;&lt;SCRIPT&gt;alert(&quot;XSS&quot;);&lt;/SCRIPT&gt;</span><span class='duration'>0.01562s</span></dd>
    <script type="text/javascript">moveProgressBar('14.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip script tags: &lt;SCRIPT SRC=&quot;http://ha.ckers.org/xss.jpg&quot;&gt;&lt;/SCRIPT&gt;</span><span class='duration'>0.01181s</span></dd>
    <script type="text/javascript">moveProgressBar('14.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should keep text: \&quot;;alert(&#x27;XSS&#x27;);//</span><span class='duration'>0.01604s</span></dd>
    <script type="text/javascript">moveProgressBar('15.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should keep text: xss:expr/*blah*/ession(alert(&#x27;XSS&#x27;))</span><span class='duration'>0.00946s</span></dd>
    <script type="text/javascript">moveProgressBar('15.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should keep text: xss:expression(alert(&#x27;XSS&#x27;))</span><span class='duration'>0.01805s</span></dd>
    <script type="text/javascript">moveProgressBar('15.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip iframe tags</span><span class='duration'>0.00556s</span></dd>
    <script type="text/javascript">moveProgressBar('15.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in img src attribute: &lt;IMG SRC=&quot;javascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><span class='duration'>0.00872s</span></dd>
    <script type="text/javascript">moveProgressBar('15.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in img src attribute: &lt;IMG SRC=JaVaScRiPt:alert(&#x27;XSS&#x27;)&gt;</span><span class='duration'>0.00716s</span></dd>
    <script type="text/javascript">moveProgressBar('15.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in img src attribute: &lt;IMG SRC=javascript:alert(String.fromChar</span><span class='duration'>0.00773s</span></dd>
    <script type="text/javascript">moveProgressBar('16.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in img src attribute: &lt;IMG SRC=&amp;#106;&amp;#97;&amp;#118;&amp;#97;&amp;#115;&amp;#99</span><span class='duration'>0.00594s</span></dd>
    <script type="text/javascript">moveProgressBar('16.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in img src attribute: &lt;IMG SRC=&amp;#0000106&amp;#0000097&amp;#0000118&amp;#000</span><span class='duration'>0.00673s</span></dd>
    <script type="text/javascript">moveProgressBar('16.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in img src attribute: &lt;IMG SRC=&amp;#x6A&amp;#x61&amp;#x76&amp;#x61&amp;#x73&amp;#x63&amp;#</span><span class='duration'>0.00708s</span></dd>
    <script type="text/javascript">moveProgressBar('16.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in img src attribute: &lt;IMG SRC=&quot; &amp;#14;  javascript:alert(&#x27;XSS&#x27;)</span><span class='duration'>0.00691s</span></dd>
    <script type="text/javascript">moveProgressBar('16.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in img src attribute: &lt;IMG SRC=&quot;javascript:alert(&#x27;XSS&#x27;)&quot;</span><span class='duration'>0.00642s</span></dd>
    <script type="text/javascript">moveProgressBar('16.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in img src attribute: &lt;INPUT TYPE=&quot;IMAGE&quot; SRC=&quot;javascript:alert</span><span class='duration'>0.00603s</span></dd>
    <script type="text/javascript">moveProgressBar('16.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in img src attribute: &lt;IMG SRC=&quot;jav	ascript:alert(&#x27;XSS&#x27;);&quot;&gt;</span><span class='duration'>0.00718s</span></dd>
    <script type="text/javascript">moveProgressBar('17.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in img src attribute: &lt;IMG SRC=&quot;jav&amp;#x09;ascript:alert(&#x27;XSS&#x27;);&quot;</span><span class='duration'>0.00696s</span></dd>
    <script type="text/javascript">moveProgressBar('17.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in img src attribute: &lt;IMG SRC=&quot;jav&amp;#x0A;ascript:alert(&#x27;XSS&#x27;);&quot;</span><span class='duration'>0.00664s</span></dd>
    <script type="text/javascript">moveProgressBar('17.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in img src attribute: &lt;IMG SRC=&quot;jav&amp;#x0D;ascript:alert(&#x27;XSS&#x27;);&quot;</span><span class='duration'>0.00648s</span></dd>
    <script type="text/javascript">moveProgressBar('17.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip xss in meta tags: &lt;META HTTP-EQUIV=&quot;Link&quot; Content=&quot;&lt;http://</span><span class='duration'>0.00663s</span></dd>
    <script type="text/javascript">moveProgressBar('17.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip xss in meta tags: &lt;META HTTP-EQUIV=&quot;refresh&quot; CONTENT=&quot;0;url</span><span class='duration'>0.00618s</span></dd>
    <script type="text/javascript">moveProgressBar('17.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip xss in meta tags: &lt;META HTTP-EQUIV=&quot;refresh&quot; CONTENT=&quot;0;url</span><span class='duration'>0.00676s</span></dd>
    <script type="text/javascript">moveProgressBar('18.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip xss in meta tags: &lt;META HTTP-EQUIV=&quot;refresh&quot; CONTENT=&quot;0; UR</span><span class='duration'>0.00561s</span></dd>
    <script type="text/javascript">moveProgressBar('18.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip xss in meta tags: &lt;META HTTP-EQUIV=&quot;Set-Cookie&quot; Content=&quot;US</span><span class='duration'>0.00515s</span></dd>
    <script type="text/javascript">moveProgressBar('18.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip xss inside tags</span><span class='duration'>0.00723s</span></dd>
    <script type="text/javascript">moveProgressBar('18.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip script/xss tags</span><span class='duration'>0.00708s</span></dd>
    <script type="text/javascript">moveProgressBar('18.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip script/src tags</span><span class='duration'>0.27248s</span></dd>
    <script type="text/javascript">moveProgressBar('18.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip xss in body background</span><span class='duration'>0.00539s</span></dd>
    <script type="text/javascript">moveProgressBar('19.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip xss in body onload: &lt;BODY ONLOAD=alert(&#x27;XSS&#x27;)&gt;</span><span class='duration'>0.00604s</span></dd>
    <script type="text/javascript">moveProgressBar('19.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip xss in body onload: &lt;BODY onload!#$%&amp;()*~+-_.,:;?@[/|\]^`=alert(&quot;XSS&quot;)&gt;</span><span class='duration'>0.00674s</span></dd>
    <script type="text/javascript">moveProgressBar('19.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip style tag</span><span class='duration'>0.00682s</span></dd>
    <script type="text/javascript">moveProgressBar('19.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle lone @imports</span><span class='duration'>0.00714s</span></dd>
    <script type="text/javascript">moveProgressBar('19.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle lone borked @imports</span><span class='duration'>0.00665s</span></dd>
    <script type="text/javascript">moveProgressBar('19.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript from img dynsrc</span><span class='duration'>0.00646s</span></dd>
    <script type="text/javascript">moveProgressBar('20.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript from img lowsrc</span><span class='duration'>0.00618s</span></dd>
    <script type="text/javascript">moveProgressBar('20.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript from bgsound src</span><span class='duration'>0.00593s</span></dd>
    <script type="text/javascript">moveProgressBar('20.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript from br size</span><span class='duration'>0.00650s</span></dd>
    <script type="text/javascript">moveProgressBar('20.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript from link href</span><span class='duration'>0.00576s</span></dd>
    <script type="text/javascript">moveProgressBar('20.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip xss from link href</span><span class='duration'>0.00550s</span></dd>
    <script type="text/javascript">moveProgressBar('20.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip namespace tags</span><span class='duration'>0.00748s</span></dd>
    <script type="text/javascript">moveProgressBar('21.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip javascript in style=background-image</span><span class='duration'>0.00754s</span></dd>
    <script type="text/javascript">moveProgressBar('21.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip script tags</span><span class='duration'>0.00717s</span></dd>
    <script type="text/javascript">moveProgressBar('21.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip #exec: &lt;!--#exec cmd=&quot;/bin/echo &#x27;&lt;SCR&#x27;&quot;--&gt;</span><span class='duration'>0.00691s</span></dd>
    <script type="text/javascript">moveProgressBar('21.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should strip #exec: &lt;!--#exec cmd=&quot;/bin/echo &#x27;IPT SRC=http://</span><span class='duration'>0.00750s</span></dd>
    <script type="text/javascript">moveProgressBar('21.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should escape ampersands</span><span class='duration'>0.00619s</span></dd>
  </dl>
</div>
<div id="div_group_48" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_48" class="passed">fix_bad_characters</dt>
    <script type="text/javascript">moveProgressBar('21.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch normal text</span><span class='duration'>0.00361s</span></dd>
    <script type="text/javascript">moveProgressBar('22.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not touch normal text with valid unicode chars</span><span class='duration'>0.00348s</span></dd>
    <script type="text/javascript">moveProgressBar('22.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should remove invalid unicode chars</span><span class='duration'>0.00390s</span></dd>
    <script type="text/javascript">moveProgressBar('22.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should escape &lt;3</span><span class='duration'>0.00374s</span></dd>
    <script type="text/javascript">moveProgressBar('22.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should convert 
 to 
</span><span class='duration'>0.00402s</span></dd>
    <script type="text/javascript">moveProgressBar('22.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should remove the spacer</span><span class='duration'>0.00363s</span></dd>
    <script type="text/javascript">moveProgressBar('22.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should remove unicode chars in the &#x27;other, format&#x27; category</span><span class='duration'>0.00353s</span></dd>
  </dl>
</div>
<div id="div_group_49" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_49" class="passed">add_paragraphs_to_text</dt>
    <script type="text/javascript">moveProgressBar('22.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not add extraneous paragraph breaks after a tags</span><span class='duration'>0.00548s</span></dd>
    <script type="text/javascript">moveProgressBar('23.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should not add extraneous paragraph breaks after abbr tags</span><span class='duration'>0.00594s</span></dd>
    <script type="text/javascript">moveProgressBar('23.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should not add extraneous paragraph breaks after acronym tags</span><span class='duration'>0.00822s</span></dd>
    <script type="text/javascript">moveProgressBar('23.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should not add extraneous paragraph breaks after address tags</span><span class='duration'>0.00660s</span></dd>
    <script type="text/javascript">moveProgressBar('23.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after p tags</span><span class='duration'>0.00748s</span></dd>
    <script type="text/javascript">moveProgressBar('23.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after dl tags</span><span class='duration'>0.00578s</span></dd>
    <script type="text/javascript">moveProgressBar('23.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after h1 tags</span><span class='duration'>0.00670s</span></dd>
    <script type="text/javascript">moveProgressBar('24.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after h2 tags</span><span class='duration'>0.00948s</span></dd>
    <script type="text/javascript">moveProgressBar('24.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after h3 tags</span><span class='duration'>0.00880s</span></dd>
    <script type="text/javascript">moveProgressBar('24.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after h4 tags</span><span class='duration'>0.00771s</span></dd>
    <script type="text/javascript">moveProgressBar('24.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after h5 tags</span><span class='duration'>0.28459s</span></dd>
    <script type="text/javascript">moveProgressBar('24.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after h6 tags</span><span class='duration'>0.00752s</span></dd>
    <script type="text/javascript">moveProgressBar('24.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after ol tags</span><span class='duration'>0.00650s</span></dd>
    <script type="text/javascript">moveProgressBar('25.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after pre tags</span><span class='duration'>0.01383s</span></dd>
    <script type="text/javascript">moveProgressBar('25.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after table tags</span><span class='duration'>0.00753s</span></dd>
    <script type="text/javascript">moveProgressBar('25.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after ul tags</span><span class='duration'>0.00743s</span></dd>
    <script type="text/javascript">moveProgressBar('25.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after blockquote tags</span><span class='duration'>0.00846s</span></dd>
    <script type="text/javascript">moveProgressBar('25.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after center tags</span><span class='duration'>0.00852s</span></dd>
    <script type="text/javascript">moveProgressBar('25.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after div tags</span><span class='duration'>0.00966s</span></dd>
    <script type="text/javascript">moveProgressBar('26.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after br tags</span><span class='duration'>0.00819s</span></dd>
    <script type="text/javascript">moveProgressBar('26.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks after hr tags</span><span class='duration'>0.00807s</span></dd>
    <script type="text/javascript">moveProgressBar('26.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap dl in p tags</span><span class='duration'>0.00718s</span></dd>
    <script type="text/javascript">moveProgressBar('26.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap h1 in p tags</span><span class='duration'>0.01086s</span></dd>
    <script type="text/javascript">moveProgressBar('26.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap h2 in p tags</span><span class='duration'>0.00622s</span></dd>
    <script type="text/javascript">moveProgressBar('26.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap h3 in p tags</span><span class='duration'>0.00591s</span></dd>
    <script type="text/javascript">moveProgressBar('27.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap h4 in p tags</span><span class='duration'>0.00929s</span></dd>
    <script type="text/javascript">moveProgressBar('27.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap h5 in p tags</span><span class='duration'>0.00969s</span></dd>
    <script type="text/javascript">moveProgressBar('27.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap h6 in p tags</span><span class='duration'>0.00878s</span></dd>
    <script type="text/javascript">moveProgressBar('27.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap ol in p tags</span><span class='duration'>0.00820s</span></dd>
    <script type="text/javascript">moveProgressBar('27.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap pre in p tags</span><span class='duration'>0.00803s</span></dd>
    <script type="text/javascript">moveProgressBar('27.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap table in p tags</span><span class='duration'>0.00734s</span></dd>
    <script type="text/javascript">moveProgressBar('27.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap ul in p tags</span><span class='duration'>0.00806s</span></dd>
    <script type="text/javascript">moveProgressBar('28.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks inside ol lists</span><span class='duration'>0.00748s</span></dd>
    <script type="text/javascript">moveProgressBar('28.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks inside ul lists</span><span class='duration'>0.25438s</span></dd>
    <script type="text/javascript">moveProgressBar('28.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks inside tables</span><span class='duration'>0.00729s</span></dd>
    <script type="text/javascript">moveProgressBar('28.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert linebreaks inside definition lists</span><span class='duration'>0.00664s</span></dd>
    <script type="text/javascript">moveProgressBar('28.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap in p and not convert linebreaks inside address tags</span><span class='duration'>0.00757s</span></dd>
    <script type="text/javascript">moveProgressBar('28.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap in p and not convert linebreaks inside h1 tags</span><span class='duration'>0.00524s</span></dd>
    <script type="text/javascript">moveProgressBar('29.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap in p and not convert linebreaks inside h2 tags</span><span class='duration'>0.00632s</span></dd>
    <script type="text/javascript">moveProgressBar('29.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap in p and not convert linebreaks inside h3 tags</span><span class='duration'>0.00761s</span></dd>
    <script type="text/javascript">moveProgressBar('29.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap in p and not convert linebreaks inside h4 tags</span><span class='duration'>0.00882s</span></dd>
    <script type="text/javascript">moveProgressBar('29.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap in p and not convert linebreaks inside h5 tags</span><span class='duration'>0.00897s</span></dd>
    <script type="text/javascript">moveProgressBar('29.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap in p and not convert linebreaks inside h6 tags</span><span class='duration'>0.00574s</span></dd>
    <script type="text/javascript">moveProgressBar('29.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap in p and not convert linebreaks inside p tags</span><span class='duration'>0.00616s</span></dd>
    <script type="text/javascript">moveProgressBar('30.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not wrap in p and not convert linebreaks inside pre tags</span><span class='duration'>0.00571s</span></dd>
    <script type="text/javascript">moveProgressBar('30.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap in p and not convert linebreaks inside a tags</span><span class='duration'>0.00545s</span></dd>
    <script type="text/javascript">moveProgressBar('30.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap in p and not convert linebreaks inside abbr tags</span><span class='duration'>0.00731s</span></dd>
    <script type="text/javascript">moveProgressBar('30.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap in p and not convert linebreaks inside acronym tags</span><span class='duration'>0.00738s</span></dd>
    <script type="text/javascript">moveProgressBar('30.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap plain text in p tags</span><span class='duration'>0.00626s</span></dd>
    <script type="text/javascript">moveProgressBar('30.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should convert single linebreak to br</span><span class='duration'>0.00774s</span></dd>
    <script type="text/javascript">moveProgressBar('31.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should convert double linebreaks to paragraph break</span><span class='duration'>0.00763s</span></dd>
    <script type="text/javascript">moveProgressBar('31.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should convert triple linebreaks into blank paragraph</span><span class='duration'>0.00792s</span></dd>
    <script type="text/javascript">moveProgressBar('31.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should convert double br tags into paragraph break</span><span class='duration'>0.00825s</span></dd>
    <script type="text/javascript">moveProgressBar('31.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should convert triple br tags into blank paragraph</span><span class='duration'>0.00725s</span></dd>
    <script type="text/javascript">moveProgressBar('31.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert double br tags inside p tags</span><span class='duration'>0.00577s</span></dd>
    <script type="text/javascript">moveProgressBar('31.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not convert triple br tags inside p tags</span><span class='duration'>0.00557s</span></dd>
    <script type="text/javascript">moveProgressBar('32.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle b inline tags spanning double line breaks</span><span class='duration'>0.00776s</span></dd>
    <script type="text/javascript">moveProgressBar('32.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle big inline tags spanning double line breaks</span><span class='duration'>0.00601s</span></dd>
    <script type="text/javascript">moveProgressBar('32.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle cite inline tags spanning double line breaks</span><span class='duration'>0.00783s</span></dd>
    <script type="text/javascript">moveProgressBar('32.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle code inline tags spanning double line breaks</span><span class='duration'>0.00806s</span></dd>
    <script type="text/javascript">moveProgressBar('32.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle del inline tags spanning double line breaks</span><span class='duration'>0.00782s</span></dd>
    <script type="text/javascript">moveProgressBar('32.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle dfn inline tags spanning double line breaks</span><span class='duration'>0.00725s</span></dd>
    <script type="text/javascript">moveProgressBar('33.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle em inline tags spanning double line breaks</span><span class='duration'>0.00735s</span></dd>
    <script type="text/javascript">moveProgressBar('33.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle i inline tags spanning double line breaks</span><span class='duration'>0.00849s</span></dd>
    <script type="text/javascript">moveProgressBar('33.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle ins inline tags spanning double line breaks</span><span class='duration'>0.27760s</span></dd>
    <script type="text/javascript">moveProgressBar('33.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle kbd inline tags spanning double line breaks</span><span class='duration'>0.00643s</span></dd>
    <script type="text/javascript">moveProgressBar('33.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle q inline tags spanning double line breaks</span><span class='duration'>0.00605s</span></dd>
    <script type="text/javascript">moveProgressBar('33.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle s inline tags spanning double line breaks</span><span class='duration'>0.00610s</span></dd>
    <script type="text/javascript">moveProgressBar('33.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle samp inline tags spanning double line breaks</span><span class='duration'>0.00883s</span></dd>
    <script type="text/javascript">moveProgressBar('34.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle small inline tags spanning double line breaks</span><span class='duration'>0.00664s</span></dd>
    <script type="text/javascript">moveProgressBar('34.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle span inline tags spanning double line breaks</span><span class='duration'>0.00619s</span></dd>
    <script type="text/javascript">moveProgressBar('34.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle strike inline tags spanning double line breaks</span><span class='duration'>0.00693s</span></dd>
    <script type="text/javascript">moveProgressBar('34.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle strong inline tags spanning double line breaks</span><span class='duration'>0.00565s</span></dd>
    <script type="text/javascript">moveProgressBar('34.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle sub inline tags spanning double line breaks</span><span class='duration'>0.00622s</span></dd>
    <script type="text/javascript">moveProgressBar('34.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle sup inline tags spanning double line breaks</span><span class='duration'>0.00637s</span></dd>
    <script type="text/javascript">moveProgressBar('35.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle tt inline tags spanning double line breaks</span><span class='duration'>0.00571s</span></dd>
    <script type="text/javascript">moveProgressBar('35.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle u inline tags spanning double line breaks</span><span class='duration'>0.00548s</span></dd>
    <script type="text/javascript">moveProgressBar('35.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle var inline tags spanning double line breaks</span><span class='duration'>0.00587s</span></dd>
    <script type="text/javascript">moveProgressBar('35.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle nested inline tags spanning double line breaks</span><span class='duration'>0.00792s</span></dd>
    <script type="text/javascript">moveProgressBar('35.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle nested inline tags spanning double line breaks</span><span class='duration'>0.00730s</span></dd>
    <script type="text/javascript">moveProgressBar('35.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should convert double linebreaks inside blockquote tag</span><span class='duration'>0.00575s</span></dd>
    <script type="text/javascript">moveProgressBar('36.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should convert double linebreaks inside center tag</span><span class='duration'>0.00667s</span></dd>
    <script type="text/javascript">moveProgressBar('36.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should convert double linebreaks inside div tag</span><span class='duration'>0.00642s</span></dd>
    <script type="text/javascript">moveProgressBar('36.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap text in p before and after existing p tag</span><span class='duration'>0.00768s</span></dd>
    <script type="text/javascript">moveProgressBar('36.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should keep attributes of block elements</span><span class='duration'>0.00739s</span></dd>
    <script type="text/javascript">moveProgressBar('36.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should keep attributes of inline elements across paragraphs</span><span class='duration'>0.00720s</span></dd>
    <script type="text/javascript">moveProgressBar('36.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle two classes</span><span class='duration'>0.00592s</span></dd>
    <script type="text/javascript">moveProgressBar('37.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should close unclosed inline tags before double linebreak</span><span class='duration'>0.00952s</span></dd>
    <script type="text/javascript">makeYellow('div_group_49');</script>
    <script type="text/javascript">makeYellow('example_group_49');</script>
    <script type="text/javascript">moveProgressBar('37.2');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should close unclosed tag withing other tag (PENDING: Opened bug report with Nokogiri)</span></dd>
    <script type="text/javascript">moveProgressBar('37.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should re-nest mis-nested tags</span><span class='duration'>0.00598s</span></dd>
    <script type="text/javascript">moveProgressBar('37.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle mixed uppercase/lowecase html tags</span><span class='duration'>0.23647s</span></dd>
    <script type="text/javascript">moveProgressBar('37.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive b inline tags in one paragraph </span><span class='duration'>0.00836s</span></dd>
    <script type="text/javascript">moveProgressBar('37.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive big inline tags in one paragraph </span><span class='duration'>0.00794s</span></dd>
    <script type="text/javascript">moveProgressBar('38.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive cite inline tags in one paragraph </span><span class='duration'>0.00832s</span></dd>
    <script type="text/javascript">moveProgressBar('38.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive code inline tags in one paragraph </span><span class='duration'>0.00786s</span></dd>
    <script type="text/javascript">moveProgressBar('38.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive del inline tags in one paragraph </span><span class='duration'>0.00848s</span></dd>
    <script type="text/javascript">moveProgressBar('38.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive dfn inline tags in one paragraph </span><span class='duration'>0.00771s</span></dd>
    <script type="text/javascript">moveProgressBar('38.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive em inline tags in one paragraph </span><span class='duration'>0.00699s</span></dd>
    <script type="text/javascript">moveProgressBar('38.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive i inline tags in one paragraph </span><span class='duration'>0.00746s</span></dd>
    <script type="text/javascript">moveProgressBar('38.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive ins inline tags in one paragraph </span><span class='duration'>0.00797s</span></dd>
    <script type="text/javascript">moveProgressBar('39.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive kbd inline tags in one paragraph </span><span class='duration'>0.00694s</span></dd>
    <script type="text/javascript">moveProgressBar('39.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive q inline tags in one paragraph </span><span class='duration'>0.00661s</span></dd>
    <script type="text/javascript">moveProgressBar('39.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive s inline tags in one paragraph </span><span class='duration'>0.00727s</span></dd>
    <script type="text/javascript">moveProgressBar('39.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive samp inline tags in one paragraph </span><span class='duration'>0.00699s</span></dd>
    <script type="text/javascript">moveProgressBar('39.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive small inline tags in one paragraph </span><span class='duration'>0.00717s</span></dd>
    <script type="text/javascript">moveProgressBar('39.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive span inline tags in one paragraph </span><span class='duration'>0.00694s</span></dd>
    <script type="text/javascript">moveProgressBar('40.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive strike inline tags in one paragraph </span><span class='duration'>0.00762s</span></dd>
    <script type="text/javascript">moveProgressBar('40.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive strong inline tags in one paragraph </span><span class='duration'>0.00675s</span></dd>
    <script type="text/javascript">makeYellow('div_group_49');</script>
    <script type="text/javascript">makeYellow('example_group_49');</script>
    <script type="text/javascript">moveProgressBar('40.4');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should wrap consecutive sub inline tags in one paragraph  (PENDING: Opened bug report with Nokogiri)</span></dd>
    <script type="text/javascript">makeYellow('div_group_49');</script>
    <script type="text/javascript">makeYellow('example_group_49');</script>
    <script type="text/javascript">moveProgressBar('40.6');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should wrap consecutive sup inline tags in one paragraph  (PENDING: Opened bug report with Nokogiri)</span></dd>
    <script type="text/javascript">moveProgressBar('40.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive tt inline tags in one paragraph </span><span class='duration'>0.00688s</span></dd>
    <script type="text/javascript">moveProgressBar('40.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive u inline tags in one paragraph </span><span class='duration'>0.27327s</span></dd>
    <script type="text/javascript">moveProgressBar('41.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should wrap consecutive var inline tags in one paragraph </span><span class='duration'>0.00796s</span></dd>
    <script type="text/javascript">moveProgressBar('41.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle &amp;gt;</span><span class='duration'>0.00635s</span></dd>
    <script type="text/javascript">moveProgressBar('41.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle &amp;lt;</span><span class='duration'>0.00559s</span></dd>
    <script type="text/javascript">moveProgressBar('41.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle &amp;amp;</span><span class='duration'>0.00615s</span></dd>
    <script type="text/javascript">moveProgressBar('41.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not add empty p tags</span><span class='duration'>0.00720s</span></dd>
    <script type="text/javascript">moveProgressBar('41.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not leave p inside i</span><span class='duration'>0.00779s</span></dd>
    <script type="text/javascript">makeRed('div_group_49');</script>
    <script type="text/javascript">makeRed('example_group_49');</script>
    <script type="text/javascript">moveProgressBar('42.0');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should deal with br tags at the beginning</span>
      <span class="duration">0.00737s</span>
      <div class="failure" id="failure_7">
        <div class="message"><pre>expected: &quot;text&quot;
     got: &quot;&lt;br&gt;text&quot; (using ==)</pre></div>
        <div class="backtrace"><pre>./spec/lib/html_cleaner_spec.rb:804:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">802</span>      result = add_paragraphs_to_text("<br/></br>text")
<span class="linenum">803</span>      doc = Nokogiri::HTML.fragment(result)
<span class="offending"><span class="linenum">804</span>      doc.xpath(".//p").children.to_s.strip.should == "text" </span>
<span class="linenum">805</span>    end
<span class="linenum">806</span>
<span class="linenum">807</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('42.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle table tags that don&#x27;t need closing</span><span class='duration'>0.00635s</span></dd>
    <script type="text/javascript">moveProgressBar('42.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should keep script tags as is</span><span class='duration'>0.00532s</span></dd>
    <script type="text/javascript">moveProgressBar('42.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should keep style tags as is</span><span class='duration'>0.00609s</span></dd>
    <script type="text/javascript">moveProgressBar('42.7');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should fail gracefully for missing ending quotation marks (PENDING: Opened enhancement request with Nokogiri)</span></dd>
    <script type="text/javascript">moveProgressBar('42.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should fail gracefully for missing starting quotation marks</span><span class='duration'>0.00609s</span></dd>
  </dl>
</div>
<div id="div_group_50" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_50" class="passed">LogfileReader</dt>
  </dl>
</div>
<div id="div_group_51" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_51" class="passed">with some logfiles</dt>
    <script type="text/javascript">moveProgressBar('43.0');</script>
    <dd class="example passed"><span class="passed_spec_name">gets the correct logfiles with no start date</span><span class='duration'>0.01172s</span></dd>
    <script type="text/javascript">moveProgressBar('43.2');</script>
    <dd class="example passed"><span class="passed_spec_name">gets the correct logfiles given a start date</span><span class='duration'>0.00657s</span></dd>
    <script type="text/javascript">moveProgressBar('43.3');</script>
    <dd class="example passed"><span class="passed_spec_name">reads rows correctly with various patterns</span><span class='duration'>0.08739s</span></dd>
  </dl>
</div>
<div id="div_group_52" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_52" class="passed">Foo</dt>
  </dl>
</div>
<div id="div_group_53" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_53" class="passed">#remove_articles_from_string</dt>
    <script type="text/javascript">moveProgressBar('43.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should remove &#x27;the &#x27;</span><span class='duration'>0.00549s</span></dd>
    <script type="text/javascript">moveProgressBar('43.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should remove &#x27;a &#x27;</span><span class='duration'>0.00483s</span></dd>
    <script type="text/javascript">moveProgressBar('43.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should remove &#x27;an &#x27;</span><span class='duration'>0.00391s</span></dd>
    <script type="text/javascript">moveProgressBar('44.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not remove &#x27;the&#x27; if followed by other characters</span><span class='duration'>0.00393s</span></dd>
  </dl>
</div>
<div id="div_group_54" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_54" class="passed">resque rake tasks</dt>
  </dl>
</div>
<div id="div_group_55" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_55" class="passed">rake resque:run_failures</dt>
    <script type="text/javascript">moveProgressBar('44.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should have &#x27;environment&#x27; as a prereq</span><span class='duration'>1.20202s</span></dd>
    <script type="text/javascript">moveProgressBar('44.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should clear out passing jobs</span><span class='duration'>0.36155s</span></dd>
    <script type="text/javascript">moveProgressBar('44.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should clear out failing jobs if they&#x27;re RecordNotFound</span><span class='duration'>0.57915s</span></dd>
    <script type="text/javascript">moveProgressBar('44.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not clear out failing jobs if they&#x27;re not RecordNotFound</span><span class='duration'>0.54068s</span></dd>
  </dl>
</div>
<div id="div_group_56" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_56" class="passed">WordCounter</dt>
    <script type="text/javascript">moveProgressBar('44.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should count plain words delimited with spaces</span><span class='duration'>0.00484s</span></dd>
    <script type="text/javascript">moveProgressBar('44.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should count plain words delimited with linebreaks</span><span class='duration'>0.00388s</span></dd>
    <script type="text/javascript">moveProgressBar('45.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should count hyphenated words as one</span><span class='duration'>0.00453s</span></dd>
    <script type="text/javascript">moveProgressBar('45.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should count contractions as one</span><span class='duration'>0.00697s</span></dd>
    <script type="text/javascript">moveProgressBar('45.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count lone html tags</span><span class='duration'>0.00610s</span></dd>
    <script type="text/javascript">moveProgressBar('45.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should recognise html tags as word delimiter</span><span class='duration'>0.00535s</span></dd>
    <script type="text/javascript">moveProgressBar('45.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count empty html tags as words</span><span class='duration'>0.00473s</span></dd>
    <script type="text/javascript">moveProgressBar('45.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count a line of * as word</span><span class='duration'>0.00517s</span></dd>
    <script type="text/javascript">moveProgressBar('46.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count a line of ~ as word</span><span class='duration'>0.00523s</span></dd>
    <script type="text/javascript">moveProgressBar('46.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count a line of !? as word</span><span class='duration'>0.00562s</span></dd>
    <script type="text/javascript">moveProgressBar('46.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count a line of - as word</span><span class='duration'>0.00575s</span></dd>
    <script type="text/javascript">moveProgressBar('46.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count a line of ~* as word</span><span class='duration'>0.00710s</span></dd>
    <script type="text/javascript">moveProgressBar('46.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count a line of ~! as word</span><span class='duration'>0.00471s</span></dd>
    <script type="text/javascript">moveProgressBar('46.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should count words with special charcters correctly</span><span class='duration'>0.00461s</span></dd>
    <script type="text/javascript">moveProgressBar('47.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should recognise — as word delimiter</span><span class='duration'>0.00467s</span></dd>
    <script type="text/javascript">moveProgressBar('47.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should recognise -- as word delimiter</span><span class='duration'>0.00423s</span></dd>
    <script type="text/javascript">moveProgressBar('47.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should recognise , as word delimiter</span><span class='duration'>0.00682s</span></dd>
    <script type="text/javascript">moveProgressBar('47.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should recognise / as word delimiter</span><span class='duration'>0.00523s</span></dd>
    <script type="text/javascript">moveProgressBar('47.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count lone — as words</span><span class='duration'>0.00421s</span></dd>
    <script type="text/javascript">moveProgressBar('47.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count lone -- as words</span><span class='duration'>0.00447s</span></dd>
    <script type="text/javascript">moveProgressBar('48.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count lone - as words</span><span class='duration'>0.00463s</span></dd>
    <script type="text/javascript">moveProgressBar('48.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count lone ! as words</span><span class='duration'>0.00540s</span></dd>
    <script type="text/javascript">moveProgressBar('48.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count lone ? as words</span><span class='duration'>0.00548s</span></dd>
    <script type="text/javascript">moveProgressBar('48.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count lone . as words</span><span class='duration'>0.00372s</span></dd>
    <script type="text/javascript">moveProgressBar('48.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count lone , as words</span><span class='duration'>0.00588s</span></dd>
    <script type="text/javascript">moveProgressBar('48.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count lone / as words</span><span class='duration'>0.00661s</span></dd>
    <script type="text/javascript">moveProgressBar('49.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count lone &quot; as words</span><span class='duration'>0.00485s</span></dd>
    <script type="text/javascript">moveProgressBar('49.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should not count lone &#x27; as words</span><span class='duration'>0.00565s</span></dd>
    <script type="text/javascript">moveProgressBar('49.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle common punctuation</span><span class='duration'>0.00710s</span></dd>
  </dl>
</div>
<div id="div_group_57" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_57" class="passed">WorksOwner</dt>
  </dl>
</div>
<div id="div_group_58" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_58" class="passed">index_cache_key</dt>
  </dl>
</div>
<div id="div_group_59" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_59" class="passed">for a noncanonical tag</dt>
  </dl>
</div>
<div id="div_group_60" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_60" class="passed">it should behave like an owner</dt>
    <script type="text/javascript">moveProgressBar('49.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is updated</span><span class='duration'>1.14790s</span></dd>
    <script type="text/javascript">moveProgressBar('49.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is deleted</span><span class='duration'>2.12556s</span></dd>
  </dl>
</div>
<div id="div_group_61" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_61" class="passed">it should behave like an owner tag</dt>
    <script type="text/javascript">moveProgressBar('49.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a new work is created</span><span class='duration'>1.72631s</span></dd>
  </dl>
</div>
<div id="div_group_62" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_62" class="passed">for a canonical tag</dt>
  </dl>
</div>
<div id="div_group_63" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_63" class="passed">it should behave like an owner</dt>
    <script type="text/javascript">moveProgressBar('50.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is updated</span><span class='duration'>1.16875s</span></dd>
    <script type="text/javascript">moveProgressBar('50.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is deleted</span><span class='duration'>1.81676s</span></dd>
  </dl>
</div>
<div id="div_group_64" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_64" class="passed">it should behave like an owner tag</dt>
    <script type="text/javascript">moveProgressBar('50.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a new work is created</span><span class='duration'>1.99517s</span></dd>
  </dl>
</div>
<div id="div_group_65" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_65" class="passed">with a synonym</dt>
    <script type="text/javascript">moveProgressBar('50.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a new work is created in the synonym</span><span class='duration'>2.98910s</span></dd>
  </dl>
</div>
<div id="div_group_66" class="example_group passed">
  <dl style="margin-left: 60px;">
  <dt id="example_group_66" class="passed">it should behave like an owner</dt>
    <script type="text/javascript">moveProgressBar('50.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is updated</span><span class='duration'>2.40896s</span></dd>
    <script type="text/javascript">moveProgressBar('50.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is deleted</span><span class='duration'>2.75185s</span></dd>
  </dl>
</div>
<div id="div_group_67" class="example_group passed">
  <dl style="margin-left: 60px;">
  <dt id="example_group_67" class="passed">it should behave like an owner tag</dt>
    <script type="text/javascript">moveProgressBar('50.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a new work is created</span><span class='duration'>2.92507s</span></dd>
  </dl>
</div>
<div id="div_group_68" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_68" class="passed">for a collection</dt>
  </dl>
</div>
<div id="div_group_69" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_69" class="passed">it should behave like an owner</dt>
    <script type="text/javascript">moveProgressBar('51.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is updated</span><span class='duration'>1.63875s</span></dd>
    <script type="text/javascript">moveProgressBar('51.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is deleted</span><span class='duration'>2.30133s</span></dd>
  </dl>
</div>
<div id="div_group_70" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_70" class="passed">it should behave like an owner collection</dt>
    <script type="text/javascript">moveProgressBar('51.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a new work is created</span><span class='duration'>2.77392s</span></dd>
  </dl>
</div>
<div id="div_group_71" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_71" class="passed">with a child</dt>
  </dl>
</div>
<div id="div_group_72" class="example_group passed">
  <dl style="margin-left: 60px;">
  <dt id="example_group_72" class="passed">it should behave like an owner</dt>
    <script type="text/javascript">moveProgressBar('51.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is updated</span><span class='duration'>3.36467s</span></dd>
    <script type="text/javascript">moveProgressBar('51.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is deleted</span><span class='duration'>3.58964s</span></dd>
  </dl>
</div>
<div id="div_group_73" class="example_group passed">
  <dl style="margin-left: 60px;">
  <dt id="example_group_73" class="passed">it should behave like an owner collection</dt>
    <script type="text/javascript">moveProgressBar('51.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a new work is created</span><span class='duration'>4.14815s</span></dd>
  </dl>
</div>
<div id="div_group_74" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_74" class="passed">with a subtag</dt>
    <script type="text/javascript">moveProgressBar('52.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should have a different key than without the subtag</span><span class='duration'>2.58838s</span></dd>
  </dl>
</div>
<div id="div_group_75" class="example_group passed">
  <dl style="margin-left: 60px;">
  <dt id="example_group_75" class="passed">when a new work is added with that tag</dt>
    <script type="text/javascript">moveProgressBar('52.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should update both the cache keys</span><span class='duration'>3.12466s</span></dd>
  </dl>
</div>
<div id="div_group_76" class="example_group passed">
  <dl style="margin-left: 60px;">
  <dt id="example_group_76" class="passed">when a new work is added without that tag</dt>
    <script type="text/javascript">moveProgressBar('52.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should update the main cache key without the tag</span><span class='duration'>3.66947s</span></dd>
    <script type="text/javascript">moveProgressBar('52.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not update the cache key with the tag</span><span class='duration'>3.99182s</span></dd>
  </dl>
</div>
<div id="div_group_77" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_77" class="passed">for a user</dt>
  </dl>
</div>
<div id="div_group_78" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_78" class="passed">it should behave like an owner</dt>
    <script type="text/javascript">moveProgressBar('52.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is updated</span><span class='duration'>1.33362s</span></dd>
    <script type="text/javascript">moveProgressBar('52.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is deleted</span><span class='duration'>1.98584s</span></dd>
  </dl>
</div>
<div id="div_group_79" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_79" class="passed">it should behave like an owner user</dt>
    <script type="text/javascript">moveProgressBar('53.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a new work is created</span><span class='duration'>1.83532s</span></dd>
    <script type="text/javascript">moveProgressBar('53.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is orphaned</span><span class='duration'>1.72372s</span></dd>
  </dl>
</div>
<div id="div_group_80" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_80" class="passed">for a pseud</dt>
  </dl>
</div>
<div id="div_group_81" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_81" class="passed">it should behave like an owner</dt>
    <script type="text/javascript">moveProgressBar('53.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is updated</span><span class='duration'>1.66267s</span></dd>
    <script type="text/javascript">moveProgressBar('53.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is deleted</span><span class='duration'>2.11507s</span></dd>
  </dl>
</div>
<div id="div_group_82" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_82" class="passed">it should behave like an owner user</dt>
    <script type="text/javascript">moveProgressBar('53.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a new work is created</span><span class='duration'>2.00293s</span></dd>
    <script type="text/javascript">moveProgressBar('53.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should change after a work is orphaned</span><span class='duration'>1.93569s</span></dd>
  </dl>
</div>
<div id="div_group_83" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_83" class="passed">XhtmlSplitter</dt>
  </dl>
</div>
<div id="div_group_84" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_84" class="passed">split_xhtml</dt>
    <script type="text/javascript">moveProgressBar('54.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not split small html</span><span class='duration'>0.00351s</span></dd>
    <script type="text/javascript">moveProgressBar('54.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should split in two small parts</span><span class='duration'>0.00601s</span></dd>
    <script type="text/javascript">moveProgressBar('54.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should split in two small parts if html is a single line</span><span class='duration'>0.00583s</span></dd>
    <script type="text/javascript">moveProgressBar('54.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle html with more than one root element</span><span class='duration'>0.00932s</span></dd>
    <script type="text/javascript">moveProgressBar('54.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should produce valid splitted XHTML parts</span><span class='duration'>0.01584s</span></dd>
    <script type="text/javascript">moveProgressBar('54.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should reopen red div in second part</span><span class='duration'>0.00593s</span></dd>
  </dl>
</div>
<div id="div_group_85" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_85" class="passed">stack_tags</dt>
    <script type="text/javascript">moveProgressBar('55.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should ignore text-only</span><span class='duration'>0.00351s</span></dd>
    <script type="text/javascript">moveProgressBar('55.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should add opening tags</span><span class='duration'>0.00327s</span></dd>
    <script type="text/javascript">moveProgressBar('55.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should remove matching closing tags</span><span class='duration'>0.00359s</span></dd>
    <script type="text/javascript">moveProgressBar('55.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should error on mismatched tags</span><span class='duration'>0.00374s</span></dd>
    <script type="text/javascript">moveProgressBar('55.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should ignore self-closing tags</span><span class='duration'>0.00373s</span></dd>
    <script type="text/javascript">moveProgressBar('55.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle attributes when adding</span><span class='duration'>0.00305s</span></dd>
    <script type="text/javascript">moveProgressBar('55.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle attributes when removing</span><span class='duration'>0.00294s</span></dd>
    <script type="text/javascript">moveProgressBar('56.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should handle multiple tags</span><span class='duration'>0.00295s</span></dd>
  </dl>
</div>
<div id="div_group_86" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_86" class="passed">close_tags</dt>
    <script type="text/javascript">moveProgressBar('56.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should close tags</span><span class='duration'>0.00308s</span></dd>
  </dl>
</div>
<div id="div_group_87" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_87" class="passed">open_tags</dt>
    <script type="text/javascript">moveProgressBar('56.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should open tags</span><span class='duration'>0.00381s</span></dd>
  </dl>
</div>
<div id="div_group_88" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_88" class="passed">AdminMailer</dt>
  </dl>
</div>
<div id="div_group_89" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_89" class="passed">abuse_reports with email</dt>
    <script type="text/javascript">moveProgressBar('56.6');</script>
    <dd class="example passed"><span class="passed_spec_name">has the correct subject</span><span class='duration'>0.67254s</span></dd>
    <script type="text/javascript">moveProgressBar('56.7');</script>
    <dd class="example passed"><span class="passed_spec_name">delivers to the correct address</span><span class='duration'>0.06047s</span></dd>
    <script type="text/javascript">moveProgressBar('56.9');</script>
    <dd class="example passed"><span class="passed_spec_name">delivers from the correct address</span><span class='duration'>0.05654s</span></dd>
    <script type="text/javascript">moveProgressBar('57.1');</script>
    <dd class="example passed"><span class="passed_spec_name">body text contains the comment</span><span class='duration'>0.05363s</span></dd>
    <script type="text/javascript">moveProgressBar('57.2');</script>
    <dd class="example passed"><span class="passed_spec_name">body text contains the email</span><span class='duration'>0.05571s</span></dd>
    <script type="text/javascript">makeRed('div_group_89');</script>
    <script type="text/javascript">makeRed('example_group_89');</script>
    <script type="text/javascript">moveProgressBar('57.4');</script>
    <dd class="example failed">
      <span class="failed_spec_name">has the url of the page with abuse</span>
      <span class="duration">0.05255s</span>
      <div class="failure" id="failure_8">
        <div class="message"><pre>expected the body to match /http:\/\/archiveofourown.org\/tags\/2000%20AD%20(Comics)\/works/, but did not.  Actual body was: &quot;&lt;head&gt;\n&lt;meta http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html; charset=UTF-8\&quot;&gt;\n&lt;title&gt;&lt;/title&gt;\n&lt;style type=\&quot;text/css\&quot;&gt;\n  .ReadMsgBody { width: 100% !important; }\n  .ExternalClass { width: 100% !important; display: block !important; }\n  .yshortcuts { border-bottom:none !important; background:none !important; color: inherit !important; }\n  #ForceOutlook2010BrowserLink span { padding: 0px; }\n  table td { border-collapse:collapse; }\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body bgcolor=\&quot;#dddddd\&quot; style=\&quot;margin:0px !important; padding:0px !important; width:100% !important;-webkit-font-smoothing: antialiased; -webkit-text-size-adjust:none; -ms-text-size-adjust:none;\&quot;&gt;\n&lt;table width=\&quot;100%\&quot; border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot; bgcolor=\&quot;#dddddd\&quot; style=\&quot;border-collapse: collapse;\&quot;&gt;\n  &lt;tr&gt;\n    &lt;td align=\&quot;center\&quot; valign=\&quot;top\&quot; style=\&quot;padding:25px 0 50px\&quot;&gt;\n      &lt;table width=\&quot;683\&quot; border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot;&gt;\n        &lt;tr&gt;\n          &lt;td align=\&quot;right\&quot; valign=\&quot;top\&quot;&gt;\n\n&lt;!-- !logo top half --&gt;\n            &lt;img src=\&quot;http://www.example.org/images/mailer/mailer-logo-top.gif\&quot; height=\&quot;22\&quot; width=\&quot;96\&quot; style=\&quot;display:block; border:none\&quot; alt=\&quot;\&quot;&gt;\n&lt;!-- /logo top half --&gt;\n\n          &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot;&gt;\n            &lt;table width=\&quot;100%\&quot; border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot;&gt;\n              &lt;tr&gt;\n                &lt;td width=\&quot;354\&quot; align=\&quot;center\&quot; valign=\&quot;middle\&quot; bgcolor=\&quot;#990000\&quot;&gt;\n                  &lt;div style=\&quot;font-family:Georgia, &#x27;Times New Roman&#x27;, Times, serif; font-size:28px; line-height:1em; color:#ffffff; font-weight:bold;\&quot;&gt;\n\n&lt;!-- !banner --&gt;\n                    &lt;a href=\&quot;http://www.example.org/\&quot; style=\&quot;color:#ffffff; text-decoration:none\&quot;&gt;&lt;span style=\&quot;color:#ffffff; text-decoration:none\&quot;&gt;Archive of Our Own&lt;/span&gt;&lt;/a&gt;\n&lt;!-- /banner --&gt;\n\n\n                  &lt;/div&gt;\n                &lt;/td&gt;\n                &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot;&gt;\n\n&lt;!-- !logo bottom half --&gt;\n                  &lt;img src=\&quot;http://www.example.org/images/mailer/mailer-logo-bottom.gif\&quot; height=\&quot;42\&quot; width=\&quot;354\&quot; style=\&quot;display:block; border:none\&quot; alt=\&quot;\&quot;&gt;\n&lt;!-- /logo bottom half --&gt;\n\n                &lt;/td&gt;\n              &lt;/tr&gt;\n            &lt;/table&gt;\n          &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot;&gt;\n            &lt;table width=\&quot;100%\&quot; border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot;&gt;\n              &lt;tr&gt;\n                &lt;td width=\&quot;8\&quot; align=\&quot;left\&quot; valign=\&quot;top\&quot; bgcolor=\&quot;#dddddd\&quot;5&gt;\n\n&lt;!-- !banner corner --&gt;\n                  &lt;img src=\&quot;http://www.example.org/images/mailer/mailer-banner-corner.gif\&quot; height=\&quot;6\&quot; width=\&quot;8\&quot; style=\&quot;display:block; border:none\&quot; alt=\&quot;\&quot;&gt;\n&lt;!-- /banner corner --&gt;\n\n\n                &lt;/td&gt;\n                &lt;td width=\&quot;2\&quot; bgcolor=\&quot;#333333\&quot;&gt;&lt;/td&gt;\n                &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot; bgcolor=\&quot;#ffffff\&quot;&gt;\n                  &lt;table width=\&quot;100%\&quot; border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot; style=\&quot;border-bottom-color:#333333; border-bottom-style: solid; border-bottom-width:2px\&quot;&gt;\n                    &lt;tr&gt;\n                      &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot; style=\&quot;padding-left:30px; padding-right:30px; padding-top:25px; padding-bottom:30px;\&quot;&gt;\n                        &lt;table width=\&quot;100%\&quot; border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot;&gt;\n\n\n                          &lt;tr&gt;\n                            &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot;&gt;\n                              &lt;div style=\&quot;font-family:Lucida Grande, Verdana, Geneva, sans-serif; font-size:1em; line-height:1.5em; color:#000000\&quot;&gt;\n\n&lt;!-- !message_body--&gt;\n                                  \n  &lt;p&gt;The following abuse report has been made:&lt;/p&gt;\n  \n  Email of the person who reported the abuse, if given: &lt;a href=\&quot;mailto:dianna@wiegand.org\&quot; style=\&quot;color:#990000\&quot;&gt;dianna@wiegand.org&lt;/a&gt;&lt;br&gt;\n  URL of the page the abuse is on: &lt;a href=\&quot;http://archiveofourown.org/tags/2000%20AD%20(Comics)/works\&quot; style=\&quot;color:#990000\&quot;&gt;http://archiveofourown.org/tags/2000%20AD%20(Comics)/works&lt;/a&gt;&lt;br&gt;\n  Description of the abuse:\n  \n  &lt;blockquote style=\&quot;background:#eee;margin:1em;padding:8px;\&quot;&gt;Rerum ut non laudantium velit. Non saepe beatae dignissimos cupiditate doloremque est. Fugit est quia.&lt;/blockquote&gt;\n\n\n&lt;!-- /message_body --&gt;\n\n                              &lt;/div&gt;\n                            &lt;/td&gt;\n                          &lt;/tr&gt;\n\n                        &lt;/table&gt;\n                      &lt;/td&gt;\n                    &lt;/tr&gt;\n                    \n                    &lt;tr&gt;\n                      &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot; style=\&quot;padding:15px 25px 25px;\&quot; bgcolor=\&quot;#990000\&quot;&gt;\n                        &lt;div style=\&quot;font-family:Lucida Grande, Verdana, Geneva, sans-serif; font-size:.7em; line-height:1.25em; color:#ffffff\&quot;&gt;\n\n&lt;!-- !footer --&gt;\n\n                          &lt;p&gt;\n                            If you&#x27;ve received this message in error, please &lt;a href=\&quot;http://www.example.org/support\&quot; style=\&quot;color:#ffffff; text-decoration:underline\&quot;&gt;contact Support&lt;/a&gt;.\n                          &lt;/p&gt;\n\n                          &lt;p&gt;\n                            The Archive of Our Own is a fan-run and fan-supported archive that relies on &lt;a href=\&quot;http://www.example.org/donate\&quot; style=\&quot;color:#ffffff; text-decoration:underline\&quot;&gt;your support&lt;/a&gt;.\n                          &lt;/p&gt;\n\n\n&lt;!-- /footer --&gt;\n\n                        &lt;/div&gt;\n                      &lt;/td&gt;\n                    &lt;/tr&gt;\n                  &lt;/table&gt;\n                &lt;/td&gt;\n                &lt;td width=\&quot;2\&quot; bgcolor=\&quot;#333333\&quot;&gt;&lt;/td&gt;\n                &lt;td width=\&quot;31\&quot; bgcolor=\&quot;#dddddd\&quot;&gt;&lt;/td&gt;\n              &lt;/tr&gt;\n            &lt;/table&gt;\n          &lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;/table&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n&lt;/body&gt;\n&quot;</pre></div>
        <div class="backtrace"><pre>./spec/mailers/abuse_mailer_spec.rb:28:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">26</span>
<span class="linenum">27</span>    it "has the url of the page with abuse" do
<span class="offending"><span class="linenum">28</span>      mail.should have_body_text(/#{report.url}/)</span>
<span class="linenum">29</span>    end
<span class="linenum">30</span>
<span class="linenum">31</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_90" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_90" class="passed">abuse_reports without email</dt>
    <script type="text/javascript">moveProgressBar('57.6');</script>
    <dd class="example passed"><span class="passed_spec_name">has the correct subject</span><span class='duration'>0.06924s</span></dd>
    <script type="text/javascript">moveProgressBar('57.7');</script>
    <dd class="example passed"><span class="passed_spec_name">delivers to the correct address</span><span class='duration'>0.06898s</span></dd>
    <script type="text/javascript">moveProgressBar('57.9');</script>
    <dd class="example passed"><span class="passed_spec_name">delivers from the correct address</span><span class='duration'>0.07520s</span></dd>
    <script type="text/javascript">moveProgressBar('58.0');</script>
    <dd class="example passed"><span class="passed_spec_name">body text contains the comment</span><span class='duration'>0.06685s</span></dd>
    <script type="text/javascript">makeRed('div_group_90');</script>
    <script type="text/javascript">makeRed('example_group_90');</script>
    <script type="text/javascript">moveProgressBar('58.2');</script>
    <dd class="example failed">
      <span class="failed_spec_name">has the url of the page with abuse</span>
      <span class="duration">0.05689s</span>
      <div class="failure" id="failure_9">
        <div class="message"><pre>expected the body to match /http:\/\/archiveofourown.org\/tags\/2000%20AD%20(Comics)\/works/, but did not.  Actual body was: &quot;&lt;head&gt;\n&lt;meta http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html; charset=UTF-8\&quot;&gt;\n&lt;title&gt;&lt;/title&gt;\n&lt;style type=\&quot;text/css\&quot;&gt;\n  .ReadMsgBody { width: 100% !important; }\n  .ExternalClass { width: 100% !important; display: block !important; }\n  .yshortcuts { border-bottom:none !important; background:none !important; color: inherit !important; }\n  #ForceOutlook2010BrowserLink span { padding: 0px; }\n  table td { border-collapse:collapse; }\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body bgcolor=\&quot;#dddddd\&quot; style=\&quot;margin:0px !important; padding:0px !important; width:100% !important;-webkit-font-smoothing: antialiased; -webkit-text-size-adjust:none; -ms-text-size-adjust:none;\&quot;&gt;\n&lt;table width=\&quot;100%\&quot; border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot; bgcolor=\&quot;#dddddd\&quot; style=\&quot;border-collapse: collapse;\&quot;&gt;\n  &lt;tr&gt;\n    &lt;td align=\&quot;center\&quot; valign=\&quot;top\&quot; style=\&quot;padding:25px 0 50px\&quot;&gt;\n      &lt;table width=\&quot;683\&quot; border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot;&gt;\n        &lt;tr&gt;\n          &lt;td align=\&quot;right\&quot; valign=\&quot;top\&quot;&gt;\n\n&lt;!-- !logo top half --&gt;\n            &lt;img src=\&quot;http://www.example.org/images/mailer/mailer-logo-top.gif\&quot; height=\&quot;22\&quot; width=\&quot;96\&quot; style=\&quot;display:block; border:none\&quot; alt=\&quot;\&quot;&gt;\n&lt;!-- /logo top half --&gt;\n\n          &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot;&gt;\n            &lt;table width=\&quot;100%\&quot; border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot;&gt;\n              &lt;tr&gt;\n                &lt;td width=\&quot;354\&quot; align=\&quot;center\&quot; valign=\&quot;middle\&quot; bgcolor=\&quot;#990000\&quot;&gt;\n                  &lt;div style=\&quot;font-family:Georgia, &#x27;Times New Roman&#x27;, Times, serif; font-size:28px; line-height:1em; color:#ffffff; font-weight:bold;\&quot;&gt;\n\n&lt;!-- !banner --&gt;\n                    &lt;a href=\&quot;http://www.example.org/\&quot; style=\&quot;color:#ffffff; text-decoration:none\&quot;&gt;&lt;span style=\&quot;color:#ffffff; text-decoration:none\&quot;&gt;Archive of Our Own&lt;/span&gt;&lt;/a&gt;\n&lt;!-- /banner --&gt;\n\n\n                  &lt;/div&gt;\n                &lt;/td&gt;\n                &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot;&gt;\n\n&lt;!-- !logo bottom half --&gt;\n                  &lt;img src=\&quot;http://www.example.org/images/mailer/mailer-logo-bottom.gif\&quot; height=\&quot;42\&quot; width=\&quot;354\&quot; style=\&quot;display:block; border:none\&quot; alt=\&quot;\&quot;&gt;\n&lt;!-- /logo bottom half --&gt;\n\n                &lt;/td&gt;\n              &lt;/tr&gt;\n            &lt;/table&gt;\n          &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot;&gt;\n            &lt;table width=\&quot;100%\&quot; border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot;&gt;\n              &lt;tr&gt;\n                &lt;td width=\&quot;8\&quot; align=\&quot;left\&quot; valign=\&quot;top\&quot; bgcolor=\&quot;#dddddd\&quot;5&gt;\n\n&lt;!-- !banner corner --&gt;\n                  &lt;img src=\&quot;http://www.example.org/images/mailer/mailer-banner-corner.gif\&quot; height=\&quot;6\&quot; width=\&quot;8\&quot; style=\&quot;display:block; border:none\&quot; alt=\&quot;\&quot;&gt;\n&lt;!-- /banner corner --&gt;\n\n\n                &lt;/td&gt;\n                &lt;td width=\&quot;2\&quot; bgcolor=\&quot;#333333\&quot;&gt;&lt;/td&gt;\n                &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot; bgcolor=\&quot;#ffffff\&quot;&gt;\n                  &lt;table width=\&quot;100%\&quot; border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot; style=\&quot;border-bottom-color:#333333; border-bottom-style: solid; border-bottom-width:2px\&quot;&gt;\n                    &lt;tr&gt;\n                      &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot; style=\&quot;padding-left:30px; padding-right:30px; padding-top:25px; padding-bottom:30px;\&quot;&gt;\n                        &lt;table width=\&quot;100%\&quot; border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot;&gt;\n\n\n                          &lt;tr&gt;\n                            &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot;&gt;\n                              &lt;div style=\&quot;font-family:Lucida Grande, Verdana, Geneva, sans-serif; font-size:1em; line-height:1.5em; color:#000000\&quot;&gt;\n\n&lt;!-- !message_body--&gt;\n                                  \n  &lt;p&gt;The following abuse report has been made:&lt;/p&gt;\n  \n  Email of the person who reported the abuse, if given: &lt;a href=\&quot;mailto:will@volkman.name\&quot; style=\&quot;color:#990000\&quot;&gt;will@volkman.name&lt;/a&gt;&lt;br&gt;\n  URL of the page the abuse is on: &lt;a href=\&quot;http://archiveofourown.org/tags/2000%20AD%20(Comics)/works\&quot; style=\&quot;color:#990000\&quot;&gt;http://archiveofourown.org/tags/2000%20AD%20(Comics)/works&lt;/a&gt;&lt;br&gt;\n  Description of the abuse:\n  \n  &lt;blockquote style=\&quot;background:#eee;margin:1em;padding:8px;\&quot;&gt;Asperiores molestiae et voluptas numquam.&lt;/blockquote&gt;\n\n\n&lt;!-- /message_body --&gt;\n\n                              &lt;/div&gt;\n                            &lt;/td&gt;\n                          &lt;/tr&gt;\n\n                        &lt;/table&gt;\n                      &lt;/td&gt;\n                    &lt;/tr&gt;\n                    \n                    &lt;tr&gt;\n                      &lt;td align=\&quot;left\&quot; valign=\&quot;top\&quot; style=\&quot;padding:15px 25px 25px;\&quot; bgcolor=\&quot;#990000\&quot;&gt;\n                        &lt;div style=\&quot;font-family:Lucida Grande, Verdana, Geneva, sans-serif; font-size:.7em; line-height:1.25em; color:#ffffff\&quot;&gt;\n\n&lt;!-- !footer --&gt;\n\n                          &lt;p&gt;\n                            If you&#x27;ve received this message in error, please &lt;a href=\&quot;http://www.example.org/support\&quot; style=\&quot;color:#ffffff; text-decoration:underline\&quot;&gt;contact Support&lt;/a&gt;.\n                          &lt;/p&gt;\n\n                          &lt;p&gt;\n                            The Archive of Our Own is a fan-run and fan-supported archive that relies on &lt;a href=\&quot;http://www.example.org/donate\&quot; style=\&quot;color:#ffffff; text-decoration:underline\&quot;&gt;your support&lt;/a&gt;.\n                          &lt;/p&gt;\n\n\n&lt;!-- /footer --&gt;\n\n                        &lt;/div&gt;\n                      &lt;/td&gt;\n                    &lt;/tr&gt;\n                  &lt;/table&gt;\n                &lt;/td&gt;\n                &lt;td width=\&quot;2\&quot; bgcolor=\&quot;#333333\&quot;&gt;&lt;/td&gt;\n                &lt;td width=\&quot;31\&quot; bgcolor=\&quot;#dddddd\&quot;&gt;&lt;/td&gt;\n              &lt;/tr&gt;\n            &lt;/table&gt;\n          &lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;/table&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n&lt;/body&gt;\n&quot;</pre></div>
        <div class="backtrace"><pre>./spec/mailers/abuse_mailer_spec.rb:54:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">52</span>
<span class="linenum">53</span>    it "has the url of the page with abuse" do
<span class="offending"><span class="linenum">54</span>      mail.should have_body_text(/#{report.url}/)</span>
<span class="linenum">55</span>    end
<span class="linenum">56</span>
<span class="linenum">57</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_91" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_91" class="passed">abuse_reports sends copy if cc_me is checked</dt>
    <script type="text/javascript">makeYellow('div_group_91');</script>
    <script type="text/javascript">makeYellow('example_group_91');</script>
    <script type="text/javascript">moveProgressBar('58.4');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">example at ./spec/mailers/abuse_mailer_spec.rb:60 (PENDING: No reason given)</span></dd>
  </dl>
</div>
<div id="div_group_92" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_92" class="passed">AdminMailer</dt>
  </dl>
</div>
<div id="div_group_93" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_93" class="passed">feedback with email</dt>
    <script type="text/javascript">makeRed('div_group_93');</script>
    <script type="text/javascript">makeRed('example_group_93');</script>
    <script type="text/javascript">moveProgressBar('58.5');</script>
    <dd class="example failed">
      <span class="failed_spec_name">has the correct subject</span>
      <span class="duration">0.00839s</span>
      <div class="failure" id="failure_10">
        <div class="message"><pre>Factory not registered: feedback</pre></div>
        <div class="backtrace"><pre>./spec/mailers/feedback_mailer_spec.rb:6:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:7:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:10:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">4</span>
<span class="linenum">5</span>  context "feedback with email" do
<span class="offending"><span class="linenum">6</span>     let(:feedback) {create(:feedback)}</span>
<span class="linenum">7</span>     let(:mail) {AdminMailer.feedback(feedback.id)}
<span class="linenum">8</span>
<span class="linenum">9</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('58.7');</script>
    <dd class="example failed">
      <span class="failed_spec_name">delivers to the correct address</span>
      <span class="duration">0.00890s</span>
      <div class="failure" id="failure_11">
        <div class="message"><pre>Factory not registered: feedback</pre></div>
        <div class="backtrace"><pre>./spec/mailers/feedback_mailer_spec.rb:6:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:7:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:14:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">4</span>
<span class="linenum">5</span>  context "feedback with email" do
<span class="offending"><span class="linenum">6</span>     let(:feedback) {create(:feedback)}</span>
<span class="linenum">7</span>     let(:mail) {AdminMailer.feedback(feedback.id)}
<span class="linenum">8</span>
<span class="linenum">9</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('58.8');</script>
    <dd class="example failed">
      <span class="failed_spec_name">delivers from the correct address</span>
      <span class="duration">0.00825s</span>
      <div class="failure" id="failure_12">
        <div class="message"><pre>Factory not registered: feedback</pre></div>
        <div class="backtrace"><pre>./spec/mailers/feedback_mailer_spec.rb:6:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:7:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:18:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">4</span>
<span class="linenum">5</span>  context "feedback with email" do
<span class="offending"><span class="linenum">6</span>     let(:feedback) {create(:feedback)}</span>
<span class="linenum">7</span>     let(:mail) {AdminMailer.feedback(feedback.id)}
<span class="linenum">8</span>
<span class="linenum">9</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('59.0');</script>
    <dd class="example failed">
      <span class="failed_spec_name">body text contains the comment</span>
      <span class="duration">0.00820s</span>
      <div class="failure" id="failure_13">
        <div class="message"><pre>Factory not registered: feedback</pre></div>
        <div class="backtrace"><pre>./spec/mailers/feedback_mailer_spec.rb:6:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:7:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:22:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">4</span>
<span class="linenum">5</span>  context "feedback with email" do
<span class="offending"><span class="linenum">6</span>     let(:feedback) {create(:feedback)}</span>
<span class="linenum">7</span>     let(:mail) {AdminMailer.feedback(feedback.id)}
<span class="linenum">8</span>
<span class="linenum">9</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('59.2');</script>
    <dd class="example failed">
      <span class="failed_spec_name">body text contains the summary</span>
      <span class="duration">0.00773s</span>
      <div class="failure" id="failure_14">
        <div class="message"><pre>Factory not registered: feedback</pre></div>
        <div class="backtrace"><pre>./spec/mailers/feedback_mailer_spec.rb:6:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:7:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:26:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">4</span>
<span class="linenum">5</span>  context "feedback with email" do
<span class="offending"><span class="linenum">6</span>     let(:feedback) {create(:feedback)}</span>
<span class="linenum">7</span>     let(:mail) {AdminMailer.feedback(feedback.id)}
<span class="linenum">8</span>
<span class="linenum">9</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_94" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_94" class="passed">feedback without email</dt>
    <script type="text/javascript">makeRed('div_group_94');</script>
    <script type="text/javascript">makeRed('example_group_94');</script>
    <script type="text/javascript">moveProgressBar('59.3');</script>
    <dd class="example failed">
      <span class="failed_spec_name">has the correct subject</span>
      <span class="duration">0.00769s</span>
      <div class="failure" id="failure_15">
        <div class="message"><pre>Factory not registered: feedback</pre></div>
        <div class="backtrace"><pre>./spec/mailers/feedback_mailer_spec.rb:33:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:34:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:37:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">31</span>
<span class="linenum">32</span>  context 'feedback without email' do
<span class="offending"><span class="linenum">33</span>    let(:feedback) {create(:feedback, email: nil)}</span>
<span class="linenum">34</span>    let(:mail) {AdminMailer.feedback(feedback.id)}
<span class="linenum">35</span>
<span class="linenum">36</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('59.5');</script>
    <dd class="example failed">
      <span class="failed_spec_name">delivers to the correct address</span>
      <span class="duration">0.00765s</span>
      <div class="failure" id="failure_16">
        <div class="message"><pre>Factory not registered: feedback</pre></div>
        <div class="backtrace"><pre>./spec/mailers/feedback_mailer_spec.rb:33:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:34:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:41:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">31</span>
<span class="linenum">32</span>  context 'feedback without email' do
<span class="offending"><span class="linenum">33</span>    let(:feedback) {create(:feedback, email: nil)}</span>
<span class="linenum">34</span>    let(:mail) {AdminMailer.feedback(feedback.id)}
<span class="linenum">35</span>
<span class="linenum">36</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('59.7');</script>
    <dd class="example failed">
      <span class="failed_spec_name">delivers from the correct address</span>
      <span class="duration">0.00885s</span>
      <div class="failure" id="failure_17">
        <div class="message"><pre>Factory not registered: feedback</pre></div>
        <div class="backtrace"><pre>./spec/mailers/feedback_mailer_spec.rb:33:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:34:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:45:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">31</span>
<span class="linenum">32</span>  context 'feedback without email' do
<span class="offending"><span class="linenum">33</span>    let(:feedback) {create(:feedback, email: nil)}</span>
<span class="linenum">34</span>    let(:mail) {AdminMailer.feedback(feedback.id)}
<span class="linenum">35</span>
<span class="linenum">36</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('59.8');</script>
    <dd class="example failed">
      <span class="failed_spec_name">body text contains the comment</span>
      <span class="duration">0.00890s</span>
      <div class="failure" id="failure_18">
        <div class="message"><pre>Factory not registered: feedback</pre></div>
        <div class="backtrace"><pre>./spec/mailers/feedback_mailer_spec.rb:33:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:34:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:49:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">31</span>
<span class="linenum">32</span>  context 'feedback without email' do
<span class="offending"><span class="linenum">33</span>    let(:feedback) {create(:feedback, email: nil)}</span>
<span class="linenum">34</span>    let(:mail) {AdminMailer.feedback(feedback.id)}
<span class="linenum">35</span>
<span class="linenum">36</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('60.0');</script>
    <dd class="example failed">
      <span class="failed_spec_name">body text contains the summary</span>
      <span class="duration">0.00768s</span>
      <div class="failure" id="failure_19">
        <div class="message"><pre>Factory not registered: feedback</pre></div>
        <div class="backtrace"><pre>./spec/mailers/feedback_mailer_spec.rb:33:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:34:in `block (3 levels) in <top (required)>'
./spec/mailers/feedback_mailer_spec.rb:53:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">31</span>
<span class="linenum">32</span>  context 'feedback without email' do
<span class="offending"><span class="linenum">33</span>    let(:feedback) {create(:feedback, email: nil)}</span>
<span class="linenum">34</span>    let(:mail) {AdminMailer.feedback(feedback.id)}
<span class="linenum">35</span>
<span class="linenum">36</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_95" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_95" class="passed">AbuseReport</dt>
  </dl>
</div>
<div id="div_group_96" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_96" class="passed">valid reports</dt>
    <script type="text/javascript">moveProgressBar('60.1');</script>
    <dd class="example passed"><span class="passed_spec_name">is valid</span><span class='duration'>0.00970s</span></dd>
    <script type="text/javascript">moveProgressBar('60.3');</script>
    <dd class="example passed"><span class="passed_spec_name">is valid without an email</span><span class='duration'>0.00630s</span></dd>
  </dl>
</div>
<div id="div_group_97" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_97" class="passed">comment missing</dt>
    <script type="text/javascript">moveProgressBar('60.5');</script>
    <dd class="example passed"><span class="passed_spec_name">is invalid</span><span class='duration'>0.01246s</span></dd>
  </dl>
</div>
<div id="div_group_98" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_98" class="passed">invalid emails</dt>
    <script type="text/javascript">moveProgressBar('60.6');</script>
    <dd class="example passed"><span class="passed_spec_name">email without @domain.com</span><span class='duration'>0.27081s</span></dd>
    <script type="text/javascript">makeRed('div_group_98');</script>
    <script type="text/javascript">makeRed('example_group_98');</script>
    <script type="text/javascript">moveProgressBar('60.8');</script>
    <dd class="example failed">
      <span class="failed_spec_name">email with bad suffix</span>
      <span class="duration">0.01095s</span>
      <div class="failure" id="failure_20">
        <div class="message"><pre>expected invalid? to return true, got false</pre></div>
        <div class="backtrace"><pre>./spec/models/abuse_report_spec.rb:26:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">24</span>
<span class="linenum">25</span>    it "email with bad suffix" do
<span class="offending"><span class="linenum">26</span>      build(:abuse_report, email: "user@domain.badbadbad").should be_invalid</span>
<span class="linenum">27</span>    end
<span class="linenum">28</span>
<span class="linenum">29</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_99" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_99" class="passed">invalid url</dt>
    <script type="text/javascript">moveProgressBar('61.0');</script>
    <dd class="example passed"><span class="passed_spec_name">text before url</span><span class='duration'>0.01215s</span></dd>
    <script type="text/javascript">moveProgressBar('61.1');</script>
    <dd class="example passed"><span class="passed_spec_name">url not from our site</span><span class='duration'>0.01179s</span></dd>
    <script type="text/javascript">moveProgressBar('61.3');</script>
    <dd class="example passed"><span class="passed_spec_name">no url</span><span class='duration'>0.01452s</span></dd>
  </dl>
</div>
<div id="div_group_100" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_100" class="passed">abuse_report cc_me</dt>
    <script type="text/javascript">moveProgressBar('61.4');</script>
    <dd class="example passed"><span class="passed_spec_name">is invalid if an email is not provided</span><span class='duration'>0.00715s</span></dd>
    <script type="text/javascript">moveProgressBar('61.6');</script>
    <dd class="example passed"><span class="passed_spec_name">is valid if an email is provided</span><span class='duration'>0.00742s</span></dd>
  </dl>
</div>
<div id="div_group_101" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_101" class="passed">Admin</dt>
    <script type="text/javascript">moveProgressBar('61.8');</script>
    <dd class="example passed"><span class="passed_spec_name">can be created</span><span class='duration'>0.05742s</span></dd>
  </dl>
</div>
<div id="div_group_102" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_102" class="passed">invalid</dt>
    <script type="text/javascript">moveProgressBar('61.9');</script>
    <dd class="example passed"><span class="passed_spec_name">is invalid without a user name</span><span class='duration'>0.01897s</span></dd>
    <script type="text/javascript">moveProgressBar('62.1');</script>
    <dd class="example passed"><span class="passed_spec_name">is invalid without an email address</span><span class='duration'>0.01618s</span></dd>
    <script type="text/javascript">moveProgressBar('62.2');</script>
    <dd class="example passed"><span class="passed_spec_name">is invalid without a password</span><span class='duration'>0.01913s</span></dd>
    <script type="text/javascript">moveProgressBar('62.4');</script>
    <dd class="example passed"><span class="passed_spec_name">is invalid without a password confirmation</span><span class='duration'>0.01862s</span></dd>
  </dl>
</div>
<div id="div_group_103" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_103" class="passed">uniqueness</dt>
    <script type="text/javascript">moveProgressBar('62.6');</script>
    <dd class="example passed"><span class="passed_spec_name">is invalid if login is not unique</span><span class='duration'>0.04379s</span></dd>
    <script type="text/javascript">moveProgressBar('62.7');</script>
    <dd class="example passed"><span class="passed_spec_name">is invalid if email already exists</span><span class='duration'>0.04559s</span></dd>
  </dl>
</div>
<div id="div_group_104" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_104" class="passed">ChallengeAssignment</dt>
  </dl>
</div>
<div id="div_group_105" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_105" class="passed">a challenge assignment</dt>
    <script type="text/javascript">moveProgressBar('62.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should save</span><span class='duration'>1.52227s</span></dd>
    <script type="text/javascript">moveProgressBar('63.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should initially be unposted and unfulfilled and undefaulted</span><span class='duration'>1.24206s</span></dd>
    <script type="text/javascript">moveProgressBar('63.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should be unsent</span><span class='duration'>0.56219s</span></dd>
  </dl>
</div>
<div id="div_group_106" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_106" class="passed">after being sent</dt>
    <script type="text/javascript">moveProgressBar('63.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should be sent</span><span class='duration'>1.33267s</span></dd>
  </dl>
</div>
<div id="div_group_107" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_107" class="passed">when it has an unposted creation</dt>
    <script type="text/javascript">moveProgressBar('63.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should be started but not posted fulfilled or defaulted</span><span class='duration'>2.37644s</span></dd>
  </dl>
</div>
<div id="div_group_108" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_108" class="passed">that gets posted</dt>
    <script type="text/javascript">moveProgressBar('63.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should be posted and fulfilled and undefaulted</span><span class='duration'>2.79600s</span></dd>
  </dl>
</div>
<div id="div_group_109" class="example_group passed">
  <dl style="margin-left: 60px;">
  <dt id="example_group_109" class="passed">that is destroyed</dt>
    <script type="text/javascript">moveProgressBar('63.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should be unposted and unfulfilled again</span><span class='duration'>3.44192s</span></dd>
  </dl>
</div>
<div id="div_group_110" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_110" class="passed">Chapter</dt>
  </dl>
</div>
<div id="div_group_111" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_111" class="passed">save</dt>
    <script type="text/javascript">moveProgressBar('64.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should save minimalistic chapter</span><span class='duration'>1.83092s</span></dd>
  </dl>
</div>
<div id="div_group_112" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_112" class="passed">Collection</dt>
  </dl>
</div>
<div id="div_group_113" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_113" class="passed">collections with challenges</dt>
  </dl>
</div>
<div id="div_group_114" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_114" class="passed">of type GiftExchange</dt>
    <script type="text/javascript">moveProgressBar('64.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should correctly identify the collection challenge type</span><span class='duration'>0.25804s</span></dd>
  </dl>
</div>
<div id="div_group_115" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_115" class="passed">with open signup</dt>
  </dl>
</div>
<div id="div_group_116" class="example_group passed">
  <dl style="margin-left: 60px;">
  <dt id="example_group_116" class="passed">and close date in the future</dt>
    <script type="text/javascript">moveProgressBar('64.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should be listed as open</span><span class='duration'>0.56943s</span></dd>
  </dl>
</div>
<div id="div_group_117" class="example_group passed">
  <dl style="margin-left: 60px;">
  <dt id="example_group_117" class="passed">and close date in the past</dt>
    <script type="text/javascript">moveProgressBar('64.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not be listed as open</span><span class='duration'>0.26430s</span></dd>
  </dl>
</div>
<div id="div_group_118" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_118" class="passed">with closed signup</dt>
    <script type="text/javascript">moveProgressBar('64.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not be listed as open</span><span class='duration'>0.56896s</span></dd>
  </dl>
</div>
<div id="div_group_119" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_119" class="passed">of type PromptMeme</dt>
    <script type="text/javascript">moveProgressBar('64.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should correctly identify the collection challenge type</span><span class='duration'>0.31324s</span></dd>
  </dl>
</div>
<div id="div_group_120" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_120" class="passed">with open signup</dt>
  </dl>
</div>
<div id="div_group_121" class="example_group passed">
  <dl style="margin-left: 60px;">
  <dt id="example_group_121" class="passed">and close date in the future</dt>
    <script type="text/javascript">moveProgressBar('65.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should be listed as open</span><span class='duration'>0.56574s</span></dd>
  </dl>
</div>
<div id="div_group_122" class="example_group passed">
  <dl style="margin-left: 60px;">
  <dt id="example_group_122" class="passed">and close date in the past</dt>
    <script type="text/javascript">moveProgressBar('65.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not be listed as open</span><span class='duration'>0.29876s</span></dd>
  </dl>
</div>
<div id="div_group_123" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_123" class="passed">with closed signup</dt>
    <script type="text/javascript">moveProgressBar('65.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should not be listed as open</span><span class='duration'>0.55618s</span></dd>
  </dl>
</div>
<div id="div_group_124" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_124" class="passed">GiftExchange</dt>
  </dl>
</div>
<div id="div_group_125" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_125" class="passed">a gift exchange challenge</dt>
    <script type="text/javascript">moveProgressBar('65.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should save</span><span class='duration'>0.24118s</span></dd>
  </dl>
</div>
<div id="div_group_126" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_126" class="passed">Invitation</dt>
  </dl>
</div>
<div id="div_group_127" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_127" class="passed">Create</dt>
  </dl>
</div>
<div id="div_group_128" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_128" class="passed">Create Invite with email</dt>
    <script type="text/javascript">moveProgressBar('65.6');</script>
    <dd class="example passed"><span class="passed_spec_name">is created with an invitation token</span><span class='duration'>0.14491s</span></dd>
  </dl>
</div>
<div id="div_group_129" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_129" class="passed">Create Invite without email</dt>
    <script type="text/javascript">moveProgressBar('65.8');</script>
    <dd class="example passed"><span class="passed_spec_name">is created with an invitation token</span><span class='duration'>0.37953s</span></dd>
  </dl>
</div>
<div id="div_group_130" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_130" class="passed">Create Invitation for existing user</dt>
    <script type="text/javascript">moveProgressBar('66.0');</script>
    <dd class="example passed"><span class="passed_spec_name">cannot be created</span><span class='duration'>0.10336s</span></dd>
  </dl>
</div>
<div id="div_group_131" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_131" class="passed">Create Invitation for invalid emails</dt>
    <script type="text/javascript">makeRed('div_group_131');</script>
    <script type="text/javascript">makeRed('example_group_131');</script>
    <script type="text/javascript">moveProgressBar('66.1');</script>
    <dd class="example failed">
      <span class="failed_spec_name">cannot be created if the email does not pass veracity check</span>
      <span class="duration">0.08202s</span>
      <div class="failure" id="failure_21">
        <div class="message"><pre>expected: false value
     got: true</pre></div>
        <div class="backtrace"><pre>./spec/models/invitation_spec.rb:46:in `block (4 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">44</span>      let(:bad_email) {build(:user, email: "fakey@crazy-z3d9df-domain.com")}
<span class="linenum">45</span>      it "cannot be created if the email does not pass veracity check" do
<span class="offending"><span class="linenum">46</span>        bad_email.save.should be_false</span>
<span class="linenum">47</span>        bad_email.errors[:invitee_email].should_not be_empty
<span class="linenum">48</span>      end
<span class="linenum">49</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_132" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_132" class="passed">Update</dt>
  </dl>
</div>
<div id="div_group_133" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_133" class="passed">Update Invitation for existing user</dt>
    <script type="text/javascript">moveProgressBar('66.3');</script>
    <dd class="example passed"><span class="passed_spec_name">cannot be created</span><span class='duration'>0.09315s</span></dd>
  </dl>
</div>
<div id="div_group_134" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_134" class="passed">Create Invitation for invalid emails</dt>
    <script type="text/javascript">makeRed('div_group_134');</script>
    <script type="text/javascript">makeRed('example_group_134');</script>
    <script type="text/javascript">moveProgressBar('66.5');</script>
    <dd class="example failed">
      <span class="failed_spec_name">cannot be created if the email does not pass veracity check</span>
      <span class="duration">0.08407s</span>
      <div class="failure" id="failure_22">
        <div class="message"><pre>expected: false value
     got: true</pre></div>
        <div class="backtrace"><pre>./spec/models/invitation_spec.rb:73:in `block (4 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">71</span>      let(:bad_email) {build(:user, email: "fakey@crazy-z3d9df-domain.com")}
<span class="linenum">72</span>      it "cannot be created if the email does not pass veracity check" do
<span class="offending"><span class="linenum">73</span>        bad_email.save.should be_false</span>
<span class="linenum">74</span>        bad_email.errors[:invitee_email].should_not be_empty
<span class="linenum">75</span>      end
<span class="linenum">76</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_135" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_135" class="passed">InviteRequest</dt>
  </dl>
</div>
<div id="div_group_136" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_136" class="passed">Validation</dt>
  </dl>
</div>
<div id="div_group_137" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_137" class="passed">Invalid email</dt>
    <script type="text/javascript">moveProgressBar('66.6');</script>
    <dd class="example passed"><span class="passed_spec_name">invitation is not created for a blank email</span><span class='duration'>0.04457s</span></dd>
    <script type="text/javascript">makeRed('div_group_137');</script>
    <script type="text/javascript">makeRed('example_group_137');</script>
    <script type="text/javascript">moveProgressBar('66.8');</script>
    <dd class="example failed">
      <span class="failed_spec_name">invitation is not created for an email that does not pass the veracity check</span>
      <span class="duration">0.03536s</span>
      <div class="failure" id="failure_23">
        <div class="message"><pre>expected: false value
     got: true</pre></div>
        <div class="backtrace"><pre>./spec/models/invite_request_spec.rb:16:in `block (4 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">14</span>        @invite = build(:invite_request, email: "fakey@crazy-z3d9df-domain.com")
<span class="linenum">15</span>        puts @invite.email
<span class="offending"><span class="linenum">16</span>        @invite.save.should be_false</span>
<span class="linenum">17</span>        @invite.errors[:email].should_not be_empty
<span class="linenum">18</span>      end
<span class="linenum">19</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_138" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_138" class="passed">Series</dt>
    <script type="text/javascript">moveProgressBar('66.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should be unrestricted when it has unrestricted works</span><span class='duration'>1.89847s</span></dd>
    <script type="text/javascript">moveProgressBar('67.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should be restricted when it has no unrestricted works</span><span class='duration'>1.50386s</span></dd>
    <script type="text/javascript">moveProgressBar('67.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should be unrestricted when it has both restricted and unrestricted works</span><span class='duration'>2.52366s</span></dd>
  </dl>
</div>
<div id="div_group_139" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_139" class="passed">Skin</dt>
  </dl>
</div>
<div id="div_group_140" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_140" class="passed">save</dt>
    <script type="text/javascript">moveProgressBar('67.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should save a basic parent relationship</span><span class='duration'>0.09801s</span></dd>
    <script type="text/javascript">moveProgressBar('67.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should require a position to save</span><span class='duration'>0.05348s</span></dd>
    <script type="text/javascript">moveProgressBar('67.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not allow using a site skin as parent for a skin unless it has role override</span><span class='duration'>0.09729s</span></dd>
    <script type="text/javascript">moveProgressBar('67.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not allow a duplicate parent-child relationship</span><span class='duration'>0.06367s</span></dd>
    <script type="text/javascript">moveProgressBar('68.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should not allow a skin to be its own parent</span><span class='duration'>0.05497s</span></dd>
    <script type="text/javascript">moveProgressBar('68.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not allow a skin ancestry with an infinite loop in it</span><span class='duration'>0.11469s</span></dd>
  </dl>
</div>
<div id="div_group_141" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_141" class="passed">Skin</dt>
  </dl>
</div>
<div id="div_group_142" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_142" class="passed">save</dt>
    <script type="text/javascript">moveProgressBar('68.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow through basic CSS including font family</span><span class='duration'>0.02854s</span></dd>
    <script type="text/javascript">moveProgressBar('68.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow through valid CSS shorthand values</span><span class='duration'>0.05293s</span></dd>
    <script type="text/javascript">moveProgressBar('68.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow images in the images directory</span><span class='duration'>0.31584s</span></dd>
    <script type="text/javascript">moveProgressBar('68.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow unquoted urls</span><span class='duration'>0.05280s</span></dd>
    <script type="text/javascript">moveProgressBar('69.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow comments on their own lines</span><span class='duration'>0.03476s</span></dd>
    <script type="text/javascript">moveProgressBar('69.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow through CSS3 properties like border-bottom-right-radius and box-shadow</span><span class='duration'>0.15403s</span></dd>
    <script type="text/javascript">moveProgressBar('69.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow through alphabetic strings as keyword values even if they are not explicitly listed</span><span class='duration'>0.03976s</span></dd>
    <script type="text/javascript">moveProgressBar('69.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow through valid CSS3 rules using quoted strings as content.</span><span class='duration'>0.02198s</span></dd>
    <script type="text/javascript">moveProgressBar('69.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow through properties that are variations on the ones in the shorthand config list</span><span class='duration'>0.14258s</span></dd>
    <script type="text/javascript">moveProgressBar('69.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow through gradients, scale, skew, translate, rotate</span><span class='duration'>0.26672s</span></dd>
    <script type="text/javascript">moveProgressBar('70.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow multiple valid values for a single property</span><span class='duration'>0.04674s</span></dd>
    <script type="text/javascript">moveProgressBar('70.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save garbage with braces</span><span class='duration'>0.01461s</span></dd>
    <script type="text/javascript">moveProgressBar('70.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save garbage with braces and colon</span><span class='duration'>0.01273s</span></dd>
    <script type="text/javascript">moveProgressBar('70.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save garbage with invalid property</span><span class='duration'>0.01629s</span></dd>
    <script type="text/javascript">moveProgressBar('70.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save urls with xss</span><span class='duration'>0.01689s</span></dd>
    <script type="text/javascript">moveProgressBar('70.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save @font-face</span><span class='duration'>0.01569s</span></dd>
    <script type="text/javascript">moveProgressBar('71.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save @import</span><span class='duration'>0.01410s</span></dd>
    <script type="text/javascript">moveProgressBar('71.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save src</span><span class='duration'>0.02112s</span></dd>
    <script type="text/javascript">moveProgressBar('71.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save url for font</span><span class='duration'>0.01434s</span></dd>
    <script type="text/javascript">moveProgressBar('71.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save htc urls</span><span class='duration'>0.01338s</span></dd>
    <script type="text/javascript">moveProgressBar('71.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save javascript in li</span><span class='duration'>0.01837s</span></dd>
    <script type="text/javascript">moveProgressBar('71.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save expression</span><span class='duration'>0.09270s</span></dd>
    <script type="text/javascript">moveProgressBar('72.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save javascript with escaped quote</span><span class='duration'>0.01980s</span></dd>
    <script type="text/javascript">moveProgressBar('72.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save gradient with xss</span><span class='duration'>0.01787s</span></dd>
    <script type="text/javascript">moveProgressBar('72.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save dsf images</span><span class='duration'>0.01943s</span></dd>
    <script type="text/javascript">moveProgressBar('72.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save urls with invalid domain</span><span class='duration'>0.01900s</span></dd>
    <script type="text/javascript">moveProgressBar('72.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save xss interrupted with comments</span><span class='duration'>0.01713s</span></dd>
    <script type="text/javascript">moveProgressBar('72.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should have a unique title</span><span class='duration'>0.02945s</span></dd>
    <script type="text/javascript">moveProgressBar('72.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should require a preview image if public</span><span class='duration'>0.32086s</span></dd>
    <script type="text/javascript">moveProgressBar('73.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should only allow valid media types</span><span class='duration'>0.02389s</span></dd>
    <script type="text/javascript">moveProgressBar('73.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should only allow valid roles</span><span class='duration'>0.03793s</span></dd>
    <script type="text/javascript">moveProgressBar('73.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should only allow valid ie-only conditions</span><span class='duration'>0.02548s</span></dd>
  </dl>
</div>
<div id="div_group_143" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_143" class="passed">use</dt>
    <script type="text/javascript">moveProgressBar('73.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should have a valid style block</span><span class='duration'>27.94683s</span></dd>
    <script type="text/javascript">moveProgressBar('73.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should include the css</span><span class='duration'>27.69517s</span></dd>
    <script type="text/javascript">moveProgressBar('73.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should include links to the default archive skin</span><span class='duration'>28.40920s</span></dd>
  </dl>
</div>
<div id="div_group_144" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_144" class="passed">StatCounter</dt>
    <script type="text/javascript">moveProgressBar('74.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should be created for a new work</span><span class='duration'>1.78395s</span></dd>
  </dl>
</div>
<div id="div_group_145" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_145" class="passed">StoryParser</dt>
  </dl>
</div>
<div id="div_group_146" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_146" class="passed">get_source_if_known:</dt>
  </dl>
</div>
<div id="div_group_147" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_147" class="passed">the SOURCE_FFNET pattern</dt>
    <script type="text/javascript">moveProgressBar('74.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should match http://fanfiction.net</span><span class='duration'>0.00460s</span></dd>
    <script type="text/javascript">moveProgressBar('74.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should match fanfiction.net</span><span class='duration'>0.00435s</span></dd>
    <script type="text/javascript">moveProgressBar('74.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should match http://www.fanfiction.net</span><span class='duration'>0.00474s</span></dd>
    <script type="text/javascript">moveProgressBar('74.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should match www.fanfiction.net</span><span class='duration'>0.00377s</span></dd>
    <script type="text/javascript">moveProgressBar('74.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not match http://adultfanfiction.net</span><span class='duration'>0.00580s</span></dd>
    <script type="text/javascript">moveProgressBar('75.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not match adultfanfiction.net</span><span class='duration'>0.00408s</span></dd>
    <script type="text/javascript">moveProgressBar('75.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not match http://www.adultfanfiction.net</span><span class='duration'>0.00563s</span></dd>
    <script type="text/javascript">moveProgressBar('75.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should not match www.adultfanfiction.net</span><span class='duration'>0.00497s</span></dd>
  </dl>
</div>
<div id="div_group_148" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_148" class="passed">the SOURCE_LJ pattern</dt>
    <script type="text/javascript">moveProgressBar('75.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should match a regular domain on livejournal</span><span class='duration'>0.00523s</span></dd>
    <script type="text/javascript">moveProgressBar('75.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should match a domain with underscores within on livejournal</span><span class='duration'>0.00554s</span></dd>
    <script type="text/javascript">moveProgressBar('75.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should match a folder style link to an individual user on livejournal</span><span class='duration'>0.00716s</span></dd>
    <script type="text/javascript">moveProgressBar('76.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should match a folder style link to a community on livejournal</span><span class='duration'>0.00537s</span></dd>
    <script type="text/javascript">moveProgressBar('76.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should match a domain on dreamwidth</span><span class='duration'>0.00541s</span></dd>
    <script type="text/javascript">moveProgressBar('76.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should match a domain on deadjournal</span><span class='duration'>0.00584s</span></dd>
    <script type="text/javascript">moveProgressBar('76.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should match a domain on insanejournal</span><span class='duration'>0.00658s</span></dd>
    <script type="text/javascript">makeYellow('div_group_148');</script>
    <script type="text/javascript">makeYellow('example_group_148');</script>
    <script type="text/javascript">moveProgressBar('76.6');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should match a folder style link to an individual user on journalfen (PENDING: Not yet implemented)</span></dd>
  </dl>
</div>
<div id="div_group_149" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_149" class="passed">Subscription</dt>
  </dl>
</div>
<div id="div_group_150" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_150" class="passed">to a work</dt>
  </dl>
</div>
<div id="div_group_151" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_151" class="passed">when the work is destroyed</dt>
    <script type="text/javascript">moveProgressBar('76.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should be destroyed</span><span class='duration'>2.12618s</span></dd>
  </dl>
</div>
<div id="div_group_152" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_152" class="passed">to a series</dt>
  </dl>
</div>
<div id="div_group_153" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_153" class="passed">when the series is destroyed</dt>
    <script type="text/javascript">moveProgressBar('77.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should be destroyed</span><span class='duration'>0.14069s</span></dd>
  </dl>
</div>
<div id="div_group_154" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_154" class="passed">to a user</dt>
  </dl>
</div>
<div id="div_group_155" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_155" class="passed">when the user is destroyed</dt>
    <script type="text/javascript">moveProgressBar('77.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should be destroyed</span><span class='duration'>0.61545s</span></dd>
  </dl>
</div>
<div id="div_group_156" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_156" class="passed">TagSetNomination</dt>
  </dl>
</div>
<div id="div_group_157" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_157" class="passed">save</dt>
    <script type="text/javascript">moveProgressBar('77.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should save a basic tag set nomination</span><span class='duration'>0.74476s</span></dd>
  </dl>
</div>
<div id="div_group_158" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_158" class="passed">Tag</dt>
    <script type="text/javascript">moveProgressBar('77.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not be valid without a name</span><span class='duration'>0.05318s</span></dd>
    <script type="text/javascript">moveProgressBar('77.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not be valid if too long</span><span class='duration'>0.01210s</span></dd>
    <script type="text/javascript">moveProgressBar('77.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not be valid with disallowed characters</span><span class='duration'>0.01266s</span></dd>
  </dl>
</div>
<div id="div_group_159" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_159" class="passed">when checking for synonym/name change</dt>
  </dl>
</div>
<div id="div_group_160" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_160" class="passed">when logged in as a regular user</dt>
    <script type="text/javascript">moveProgressBar('77.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should ignore capitalisation</span><span class='duration'>0.13495s</span></dd>
    <script type="text/javascript">moveProgressBar('78.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should ignore accented characters</span><span class='duration'>0.62081s</span></dd>
    <script type="text/javascript">moveProgressBar('78.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should be careful with the ß</span><span class='duration'>0.15762s</span></dd>
    <script type="text/javascript">moveProgressBar('78.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should not ignore punctuation</span><span class='duration'>0.13357s</span></dd>
    <script type="text/javascript">moveProgressBar('78.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not ignore whitespace</span><span class='duration'>0.15023s</span></dd>
  </dl>
</div>
<div id="div_group_161" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_161" class="passed">when logged in as an admin</dt>
    <script type="text/javascript">moveProgressBar('78.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should allow any change</span><span class='duration'>0.31771s</span></dd>
  </dl>
</div>
<div id="div_group_162" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_162" class="passed">unwrangled?</dt>
    <script type="text/javascript">moveProgressBar('78.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should be false for a canonical</span><span class='duration'>0.11014s</span></dd>
    <script type="text/javascript">moveProgressBar('79.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should be false for an unwrangleable</span><span class='duration'>0.03222s</span></dd>
    <script type="text/javascript">moveProgressBar('79.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should be false for a synonym</span><span class='duration'>0.08722s</span></dd>
    <script type="text/javascript">moveProgressBar('79.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should be false for a merger tag</span><span class='duration'>0.08867s</span></dd>
    <script type="text/javascript">moveProgressBar('79.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should be true for a tag with a Fandom parent</span><span class='duration'>0.19466s</span></dd>
  </dl>
</div>
<div id="div_group_163" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_163" class="passed">can_change_type?</dt>
    <script type="text/javascript">moveProgressBar('79.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should be false for a wrangled tag</span><span class='duration'>0.04007s</span></dd>
    <script type="text/javascript">moveProgressBar('79.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should be false for a tag used on a draft</span><span class='duration'>0.76368s</span></dd>
    <script type="text/javascript">moveProgressBar('80.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should be false for a tag used on a work</span><span class='duration'>0.50058s</span></dd>
    <script type="text/javascript">makeYellow('div_group_163');</script>
    <script type="text/javascript">makeYellow('example_group_163');</script>
    <script type="text/javascript">moveProgressBar('80.2');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should be false for a tag used in a tag set (PENDING: Not yet implemented)</span></dd>
    <script type="text/javascript">moveProgressBar('80.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should be true for a tag used on a bookmark</span><span class='duration'>0.92053s</span></dd>
    <script type="text/javascript">moveProgressBar('80.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should be true for a tag used on an external work</span><span class='duration'>0.77617s</span></dd>
  </dl>
</div>
<div id="div_group_164" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_164" class="passed">type changes</dt>
  </dl>
</div>
<div id="div_group_165" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_165" class="passed">from Unsorted to Fandom</dt>
    <script type="text/javascript">moveProgressBar('80.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should be a Fandom</span><span class='duration'>0.08412s</span></dd>
    <script type="text/javascript">moveProgressBar('80.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should have the Uncategorized Fandoms Media as a parent</span><span class='duration'>0.08377s</span></dd>
  </dl>
</div>
<div id="div_group_166" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_166" class="passed">from Unsorted to Character</dt>
    <script type="text/javascript">moveProgressBar('81.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should be a Character</span><span class='duration'>0.05832s</span></dd>
    <script type="text/javascript">moveProgressBar('81.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not have any parents</span><span class='duration'>0.05563s</span></dd>
  </dl>
</div>
<div id="div_group_167" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_167" class="passed">from Fandom to Unsorted</dt>
    <script type="text/javascript">moveProgressBar('81.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should be an UnsortedTag</span><span class='duration'>0.09243s</span></dd>
    <script type="text/javascript">moveProgressBar('81.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not have any parents</span><span class='duration'>0.09676s</span></dd>
  </dl>
</div>
<div id="div_group_168" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_168" class="passed">from Fandom to Character</dt>
    <script type="text/javascript">moveProgressBar('81.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should be a Character</span><span class='duration'>0.09841s</span></dd>
    <script type="text/javascript">moveProgressBar('81.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not have any parents</span><span class='duration'>0.09781s</span></dd>
  </dl>
</div>
<div id="div_group_169" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_169" class="passed">from Character to Unsorted</dt>
    <script type="text/javascript">moveProgressBar('82.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should be an UnsortedTag</span><span class='duration'>0.05571s</span></dd>
    <script type="text/javascript">moveProgressBar('82.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not have any parents</span><span class='duration'>0.07710s</span></dd>
  </dl>
</div>
<div id="div_group_170" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_170" class="passed">from Character to Fandom</dt>
    <script type="text/javascript">moveProgressBar('82.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should be a Fandom</span><span class='duration'>0.07781s</span></dd>
    <script type="text/javascript">moveProgressBar('82.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should have the Uncategorized Fandoms Media as a parent</span><span class='duration'>0.32605s</span></dd>
  </dl>
</div>
<div id="div_group_171" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_171" class="passed">when the Character had a Fandom attached</dt>
    <script type="text/javascript">moveProgressBar('82.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should drop the Fandom when changed to UnsortedTag</span><span class='duration'>0.16108s</span></dd>
    <script type="text/javascript">moveProgressBar('82.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should drop the Fandom and add to Uncategorized when changed to Fandom</span><span class='duration'>0.17965s</span></dd>
  </dl>
</div>
<div id="div_group_172" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_172" class="passed">find_or_create_by_name</dt>
    <script type="text/javascript">moveProgressBar('83.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should sort unsorted tags that get used on works</span><span class='duration'>0.48952s</span></dd>
    <script type="text/javascript">moveProgressBar('83.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should sort unsorted tags that get used on external works</span><span class='duration'>0.65049s</span></dd>
  </dl>
</div>
<div id="div_group_173" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_173" class="passed">multiple tags of the same type</dt>
    <script type="text/javascript">moveProgressBar('83.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should let you make a tag the synonym of a canonical one</span><span class='duration'>0.42885s</span></dd>
    <script type="text/javascript">moveProgressBar('83.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should let you make a canonical tag the subtag of another canonical one</span><span class='duration'>0.55148s</span></dd>
  </dl>
</div>
<div id="div_group_174" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_174" class="passed">with a synonym and a subtag</dt>
  </dl>
</div>
<div id="div_group_175" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_175" class="passed">and works under each</dt>
    <script type="text/javascript">makeRed('div_group_175');</script>
    <script type="text/javascript">makeRed('example_group_175');</script>
    <script type="text/javascript">moveProgressBar('83.6');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should find all works that would need to be reindexed</span>
      <span class="duration">1.97623s</span>
      <div class="failure" id="failure_24">
        <div class="message"><pre>
expected: [684]
     got: []

(compared using ==)
</pre></div>
        <div class="backtrace"><pre>./spec/models/tag_spec.rb:393:in `block (5 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">391</span>        it "should find all works that would need to be reindexed" do      
<span class="linenum">392</span>          # get all the work ids that it would queue
<span class="offending"><span class="linenum">393</span>          @syn_tag.all_filtered_work_ids.should eq([@syn_work.id])</span>
<span class="linenum">394</span>          @sub_tag.all_filtered_work_ids.should eq([@sub_work.id])
<span class="linenum">395</span>          @canonical_tag.all_filtered_work_ids.should eq([@direct_work.id, @syn_work.id, @sub_work.id])
<span class="linenum">396</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_176" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_176" class="passed">and bookmarks under each</dt>
    <script type="text/javascript">moveProgressBar('83.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should find all bookmarks that would need to be reindexed</span><span class='duration'>2.93870s</span></dd>
  </dl>
</div>
<div id="div_group_177" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_177" class="passed">UnsortedTag</dt>
    <script type="text/javascript">moveProgressBar('83.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should be created from a bookmark</span><span class='duration'>0.78277s</span></dd>
  </dl>
</div>
<div id="div_group_178" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_178" class="passed">recategorize</dt>
    <script type="text/javascript">moveProgressBar('84.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should return a tag of type Fandom</span><span class='duration'>0.41580s</span></dd>
    <script type="text/javascript">moveProgressBar('84.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should return a tag of type Character</span><span class='duration'>0.46651s</span></dd>
    <script type="text/javascript">moveProgressBar('84.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should return a tag of type Relationship</span><span class='duration'>0.81258s</span></dd>
    <script type="text/javascript">moveProgressBar('84.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should return a tag of type Freeform</span><span class='duration'>0.37088s</span></dd>
  </dl>
</div>
<div id="div_group_179" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_179" class="passed">User</dt>
  </dl>
</div>
<div id="div_group_180" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_180" class="passed">User Accepts Invite</dt>
  </dl>
</div>
<div id="div_group_181" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_181" class="passed">user invited without invite request</dt>
    <script type="text/javascript">moveProgressBar('84.7');</script>
    <dd class="example passed"><span class="passed_spec_name">marks invitation redeemed</span><span class='duration'>0.00925s</span></dd>
  </dl>
</div>
<div id="div_group_182" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_182" class="passed">user requested an invitation</dt>
    <script type="text/javascript">moveProgressBar('84.9');</script>
    <dd class="example passed"><span class="passed_spec_name">marks invitation redeemed</span><span class='duration'>0.00926s</span></dd>
    <script type="text/javascript">moveProgressBar('85.1');</script>
    <dd class="example passed"><span class="passed_spec_name">removes the user from invitation queue</span><span class='duration'>0.00870s</span></dd>
  </dl>
</div>
<div id="div_group_183" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_183" class="passed">User</dt>
  </dl>
</div>
<div id="div_group_184" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_184" class="passed">Create</dt>
  </dl>
</div>
<div id="div_group_185" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_185" class="passed">valid user</dt>
    <script type="text/javascript">moveProgressBar('85.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should save a minimalistic user</span><span class='duration'>0.08148s</span></dd>
    <script type="text/javascript">moveProgressBar('85.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should encrypt password</span><span class='duration'>0.07879s</span></dd>
    <script type="text/javascript">moveProgressBar('85.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should create default associateds</span><span class='duration'>0.08220s</span></dd>
  </dl>
</div>
<div id="div_group_186" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_186" class="passed">User Validations</dt>
  </dl>
</div>
<div id="div_group_187" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_187" class="passed">missing age_over_13 flage</dt>
    <script type="text/javascript">moveProgressBar('85.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save user</span><span class='duration'>0.02315s</span></dd>
  </dl>
</div>
<div id="div_group_188" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_188" class="passed">missing terms_of_service flag</dt>
    <script type="text/javascript">moveProgressBar('85.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save user</span><span class='duration'>0.02391s</span></dd>
  </dl>
</div>
<div id="div_group_189" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_189" class="passed">login length</dt>
    <script type="text/javascript">moveProgressBar('86.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save user with too short login</span><span class='duration'>0.02583s</span></dd>
    <script type="text/javascript">moveProgressBar('86.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save user with too long login</span><span class='duration'>0.02496s</span></dd>
  </dl>
</div>
<div id="div_group_190" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_190" class="passed">email veracity</dt>
    <script type="text/javascript">makeRed('div_group_190');</script>
    <script type="text/javascript">makeRed('example_group_190');</script>
    <script type="text/javascript">moveProgressBar('86.4');</script>
    <dd class="example failed">
      <span class="failed_spec_name">does not save if email does not pass veracity check</span>
      <span class="duration">0.36511s</span>
      <div class="failure" id="failure_25">
        <div class="message"><pre>expected: false value
     got: true</pre></div>
        <div class="backtrace"><pre>./spec/models/user_spec.rb:66:in `block (5 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">64</span>        let(:bad_email) {build(:user, email: "fakey@crazy-z3d9df-domain.com")}
<span class="linenum">65</span>        it "does not save if email does not pass veracity check" do
<span class="offending"><span class="linenum">66</span>          bad_email.save.should be_false</span>
<span class="linenum">67</span>          bad_email.errors[:email].should_not be_empty
<span class="linenum">68</span>        end
<span class="linenum">69</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_191" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_191" class="passed">password length</dt>
    <script type="text/javascript">moveProgressBar('86.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save user with too short login</span><span class='duration'>0.02386s</span></dd>
    <script type="text/javascript">moveProgressBar('86.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save user with too long login</span><span class='duration'>0.02237s</span></dd>
  </dl>
</div>
<div id="div_group_192" class="example_group passed">
  <dl style="margin-left: 45px;">
  <dt id="example_group_192" class="passed">login or email exists</dt>
    <script type="text/javascript">moveProgressBar('86.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save user when login exists already</span><span class='duration'>0.02408s</span></dd>
    <script type="text/javascript">moveProgressBar('87.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should not save user when email exists already</span><span class='duration'>0.02122s</span></dd>
  </dl>
</div>
<div id="div_group_193" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_193" class="passed">has_no_credentials?</dt>
    <script type="text/javascript">moveProgressBar('87.2');</script>
    <dd class="example passed"><span class="passed_spec_name">is true if password is blank</span><span class='duration'>0.00746s</span></dd>
    <script type="text/javascript">moveProgressBar('87.3');</script>
    <dd class="example passed"><span class="passed_spec_name">is false if password is not blank</span><span class='duration'>0.00721s</span></dd>
  </dl>
</div>
<div id="div_group_194" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_194" class="passed">User</dt>
  </dl>
</div>
<div id="div_group_195" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_195" class="passed">most_popular_tags</dt>
    <script type="text/javascript">moveProgressBar('87.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should be empty when user has no works</span><span class='duration'>0.27200s</span></dd>
    <script type="text/javascript">moveProgressBar('87.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should find one fandom for one work</span><span class='duration'>0.98840s</span></dd>
    <script type="text/javascript">moveProgressBar('87.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should find two fandoms for one work</span><span class='duration'>1.04522s</span></dd>
    <script type="text/javascript">makeRed('div_group_195');</script>
    <script type="text/javascript">makeRed('example_group_195');</script>
    <script type="text/javascript">moveProgressBar('88.0');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should find two fandoms for two works</span>
      <span class="duration">0.99571s</span>
      <div class="failure" id="failure_26">
        <div class="message"><pre>Tag(#52165740) expected, got String(#7073120)</pre></div>
        <div class="backtrace"><pre>./spec/models/user_tags_spec.rb:37:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">35</span>      create(:work, { :authors => [@pseud],
<span class="linenum">36</span>                      :fandom_string => @fandom1.name })
<span class="offending"><span class="linenum">37</span>      create(:work, { :authors => [@pseud],</span>
<span class="linenum">38</span>                      :fandoms => [@fandom2.name] })
<span class="linenum">39</span>      @user.most_popular_tags.should =~ [@fandom1, @fandom2]
<span class="linenum">40</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('88.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should count duplicated fandoms</span><span class='duration'>1.28531s</span></dd>
    <script type="text/javascript">moveProgressBar('88.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should find different kinds of tags</span><span class='duration'>0.95487s</span></dd>
    <script type="text/javascript">moveProgressBar('88.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should limit to one kind of tags</span><span class='duration'>0.74391s</span></dd>
    <script type="text/javascript">moveProgressBar('88.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should limit length of returned collection</span><span class='duration'>1.40597s</span></dd>
  </dl>
</div>
<div id="div_group_196" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_196" class="passed">WorkSearch</dt>
  </dl>
</div>
<div id="div_group_197" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_197" class="passed">#search_results</dt>
    <script type="text/javascript">moveProgressBar('88.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should find works that match</span><span class='duration'>3.08319s</span></dd>
    <script type="text/javascript">moveProgressBar('88.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not find works that don&#x27;t match</span><span class='duration'>2.78652s</span></dd>
  </dl>
</div>
<div id="div_group_198" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_198" class="passed">when searching unposted works</dt>
    <script type="text/javascript">moveProgressBar('89.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should not return them by default</span><span class='duration'>2.67488s</span></dd>
  </dl>
</div>
<div id="div_group_199" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_199" class="passed">when searching restricted works</dt>
    <script type="text/javascript">moveProgressBar('89.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should not return them by default</span><span class='duration'>2.97832s</span></dd>
    <script type="text/javascript">moveProgressBar('89.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should return them when asked</span><span class='duration'>2.78022s</span></dd>
  </dl>
</div>
<div id="div_group_200" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_200" class="passed">when searching incomplete works</dt>
    <script type="text/javascript">moveProgressBar('89.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should not return them when asked for complete works</span><span class='duration'>2.95710s</span></dd>
  </dl>
</div>
<div id="div_group_201" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_201" class="passed">when searching by title</dt>
    <script type="text/javascript">moveProgressBar('89.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should match partial titles</span><span class='duration'>2.59881s</span></dd>
    <script type="text/javascript">moveProgressBar('89.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not match fields other than titles</span><span class='duration'>2.71262s</span></dd>
  </dl>
</div>
<div id="div_group_202" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_202" class="passed">when searching by author</dt>
    <script type="text/javascript">moveProgressBar('90.1');</script>
    <dd class="example passed"><span class="passed_spec_name">should match partial author names</span><span class='duration'>2.71673s</span></dd>
    <script type="text/javascript">moveProgressBar('90.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should not match fields other than authors</span><span class='duration'>2.73186s</span></dd>
    <script type="text/javascript">moveProgressBar('90.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should turn - into NOT</span><span class='duration'>3.13289s</span></dd>
  </dl>
</div>
<div id="div_group_203" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_203" class="passed">when searching by language</dt>
    <script type="text/javascript">makeYellow('div_group_203');</script>
    <script type="text/javascript">makeYellow('example_group_203');</script>
    <script type="text/javascript">moveProgressBar('90.6');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should only return works in that language (PENDING: Not yet implemented)</span></dd>
  </dl>
</div>
<div id="div_group_204" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_204" class="passed">when searching by fandom</dt>
    <script type="text/javascript">moveProgressBar('90.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should only return works in that fandom</span><span class='duration'>2.74573s</span></dd>
    <script type="text/javascript">moveProgressBar('90.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should not choke on exclamation points</span><span class='duration'>2.84211s</span></dd>
  </dl>
</div>
<div id="div_group_205" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_205" class="passed">when searching by collection</dt>
    <script type="text/javascript">makeYellow('div_group_205');</script>
    <script type="text/javascript">makeYellow('example_group_205');</script>
    <script type="text/javascript">moveProgressBar('91.1');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should only return works in that collection (PENDING: Not yet implemented)</span></dd>
  </dl>
</div>
<div id="div_group_206" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_206" class="passed">when searching by word count</dt>
    <script type="text/javascript">moveProgressBar('91.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should find the right works less than a given number</span><span class='duration'>3.03938s</span></dd>
    <script type="text/javascript">moveProgressBar('91.4');</script>
    <dd class="example passed"><span class="passed_spec_name">should find the right works more than a given number</span><span class='duration'>3.33038s</span></dd>
    <script type="text/javascript">moveProgressBar('91.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should find the right works within a range</span><span class='duration'>3.17357s</span></dd>
  </dl>
</div>
<div id="div_group_207" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_207" class="passed">when searching by kudos count</dt>
    <script type="text/javascript">moveProgressBar('91.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should find the right works less than a given number</span><span class='duration'>2.92758s</span></dd>
    <script type="text/javascript">moveProgressBar('91.9');</script>
    <dd class="example passed"><span class="passed_spec_name">should find the right works more than a given number</span><span class='duration'>2.65109s</span></dd>
    <script type="text/javascript">moveProgressBar('92.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should find the right works within a range</span><span class='duration'>2.75568s</span></dd>
  </dl>
</div>
<div id="div_group_208" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_208" class="passed">when searching by comments count</dt>
    <script type="text/javascript">moveProgressBar('92.2');</script>
    <dd class="example passed"><span class="passed_spec_name">should find the right works less than a given number</span><span class='duration'>2.76700s</span></dd>
    <script type="text/javascript">moveProgressBar('92.3');</script>
    <dd class="example passed"><span class="passed_spec_name">should find the right works more than a given number</span><span class='duration'>2.64393s</span></dd>
    <script type="text/javascript">moveProgressBar('92.5');</script>
    <dd class="example passed"><span class="passed_spec_name">should find the right works within a range</span><span class='duration'>3.20803s</span></dd>
  </dl>
</div>
<div id="div_group_209" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_209" class="passed">when searching by bookmarks count</dt>
    <script type="text/javascript">moveProgressBar('92.7');</script>
    <dd class="example passed"><span class="passed_spec_name">should find the right works less than a given number</span><span class='duration'>2.67590s</span></dd>
    <script type="text/javascript">moveProgressBar('92.8');</script>
    <dd class="example passed"><span class="passed_spec_name">should find the right works more than a given number</span><span class='duration'>2.81555s</span></dd>
    <script type="text/javascript">moveProgressBar('93.0');</script>
    <dd class="example passed"><span class="passed_spec_name">should find the right works within a range</span><span class='duration'>2.71249s</span></dd>
  </dl>
</div>
<div id="div_group_210" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_210" class="passed">Work</dt>
    <script type="text/javascript">moveProgressBar('93.2');</script>
    <dd class="example passed"><span class="passed_spec_name">creates a minimally work</span><span class='duration'>0.80513s</span></dd>
    <script type="text/javascript">makeYellow('div_group_210');</script>
    <script type="text/javascript">makeYellow('example_group_210');</script>
    <script type="text/javascript">moveProgressBar('93.3');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should send an email when added to collection (PENDING: Not yet implemented)</span></dd>
  </dl>
</div>
<div id="div_group_211" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_211" class="passed">create_stat_counter</dt>
    <script type="text/javascript">moveProgressBar('93.5');</script>
    <dd class="example passed"><span class="passed_spec_name">creates a stat counter for that work id</span><span class='duration'>0.78293s</span></dd>
  </dl>
</div>
<div id="div_group_212" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_212" class="passed">invalid title</dt>
    <script type="text/javascript">moveProgressBar('93.6');</script>
    <dd class="example passed"><span class="passed_spec_name">should be invalid</span><span class='duration'>0.24129s</span></dd>
    <script type="text/javascript">moveProgressBar('93.8');</script>
    <dd class="example passed"><span class="passed_spec_name">cannot be shorter than ArchiveConfig.TITLE_MIN</span><span class='duration'>0.23296s</span></dd>
    <script type="text/javascript">moveProgressBar('94.0');</script>
    <dd class="example passed"><span class="passed_spec_name">cannot be longer than ArchiveConfig.TITLE_MAX</span><span class='duration'>0.22084s</span></dd>
  </dl>
</div>
<div id="div_group_213" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_213" class="passed">clean_and_validate_title</dt>
    <script type="text/javascript">moveProgressBar('94.1');</script>
    <dd class="example passed"><span class="passed_spec_name">strips out leading spaces from the title</span><span class='duration'>0.77152s</span></dd>
    <script type="text/javascript">makeRed('div_group_213');</script>
    <script type="text/javascript">makeRed('example_group_213');</script>
    <script type="text/javascript">moveProgressBar('94.3');</script>
    <dd class="example failed">
      <span class="failed_spec_name">errors if the title without leading spaces is shorter than 1</span>
      <span class="duration">0.41149s</span>
      <div class="failure" id="failure_27">
        <div class="message"><pre>expected [] to include &quot;Title must be at least 1 characters long without leading spaces.&quot;</pre></div>
        <div class="backtrace"><pre>./spec/models/work_spec.rb:45:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">43</span>      @work = create(:work, title: "     #{too_short}")
<span class="linenum">44</span>      @work.reload
<span class="offending"><span class="linenum">45</span>      @work.errors[:base].should include("Title must be at least #{ArchiveConfig.TITLE_MIN} characters long without leading spaces.")</span>
<span class="linenum">46</span>    end
<span class="linenum">47</span>
<span class="linenum">48</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_214" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_214" class="passed">invalid summary</dt>
    <script type="text/javascript">moveProgressBar('94.4');</script>
    <dd class="example passed"><span class="passed_spec_name">cannot be longer than ArchiveConfig.SUMMARY_MAX</span><span class='duration'>0.23486s</span></dd>
  </dl>
</div>
<div id="div_group_215" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_215" class="passed">invalid notes</dt>
    <script type="text/javascript">moveProgressBar('94.6');</script>
    <dd class="example passed"><span class="passed_spec_name">cannot be longer than ArchiveConfig.NOTES_MAX</span><span class='duration'>0.59509s</span></dd>
  </dl>
</div>
<div id="div_group_216" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_216" class="passed">invalid endnotes</dt>
    <script type="text/javascript">moveProgressBar('94.8');</script>
    <dd class="example passed"><span class="passed_spec_name">cannot be longer than ArchiveConfig.NOTES_MAX</span><span class='duration'>0.26167s</span></dd>
  </dl>
</div>
<div id="div_group_217" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_217" class="passed">validate authors</dt>
    <script type="text/javascript">makeYellow('div_group_217');</script>
    <script type="text/javascript">makeYellow('example_group_217');</script>
    <script type="text/javascript">moveProgressBar('94.9');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">does not save an invalid pseud with * (PENDING: No reason given)</span></dd>
    <script type="text/javascript">moveProgressBar('95.1');</script>
    <dd class="example passed"><span class="passed_spec_name">does not save if author is blank</span><span class='duration'>0.22576s</span></dd>
  </dl>
</div>
<div id="div_group_218" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_218" class="passed">work_skin_allowed</dt>
  </dl>
</div>
<div id="div_group_219" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_219" class="passed">private skin</dt>
    <script type="text/javascript">makeYellow('div_group_219');</script>
    <script type="text/javascript">makeYellow('example_group_219');</script>
    <script type="text/javascript">moveProgressBar('95.3');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">can be used by the work skin author (PENDING: No reason given)</span></dd>
    <script type="text/javascript">makeYellow('div_group_219');</script>
    <script type="text/javascript">makeYellow('example_group_219');</script>
    <script type="text/javascript">moveProgressBar('95.4');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">cannot be used by another user (PENDING: No reason given)</span></dd>
  </dl>
</div>
<div id="div_group_220" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_220" class="passed">new recipients virtual attribute</dt>
    <script type="text/javascript">makeYellow('div_group_220');</script>
    <script type="text/javascript">makeYellow('example_group_220');</script>
    <script type="text/javascript">moveProgressBar('95.6');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should be the same as recipients when they are first added (PENDING: No reason given)</span></dd>
    <script type="text/javascript">makeYellow('div_group_220');</script>
    <script type="text/javascript">makeYellow('example_group_220');</script>
    <script type="text/javascript">moveProgressBar('95.7');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should only contain the new recipients when more are added (PENDING: No reason given)</span></dd>
    <script type="text/javascript">makeYellow('div_group_220');</script>
    <script type="text/javascript">makeYellow('example_group_220');</script>
    <script type="text/javascript">moveProgressBar('95.9');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should only contain the new recipient if replacing the previous recipient (PENDING: No reason given)</span></dd>
    <script type="text/javascript">makeYellow('div_group_220');</script>
    <script type="text/javascript">makeYellow('example_group_220');</script>
    <script type="text/javascript">moveProgressBar('96.1');</script>
    <dd class="example not_implemented"><span class="not_implemented_spec_name">should be empty if one or more of the original recipients are removed (PENDING: No reason given)</span></dd>
  </dl>
</div>
<div id="div_group_221" class="example_group passed">
  <dl style="margin-left: 0px;">
  <dt id="example_group_221" class="passed">Comments</dt>
  </dl>
</div>
<div id="div_group_222" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_222" class="passed">on restricted works</dt>
    <script type="text/javascript">makeRed('div_group_222');</script>
    <script type="text/javascript">makeRed('example_group_222');</script>
    <script type="text/javascript">moveProgressBar('96.2');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should not be creatable by guests on a work</span>
      <span class="duration">0.68065s</span>
      <div class="failure" id="failure_28">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:47:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">45</span>      @work1 = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", restricted: "true" )
<span class="linenum">46</span>      @work1.index.refresh
<span class="offending"><span class="linenum">47</span>      @comment = Comment.create(:comment)</span>
<span class="linenum">48</span>      @work1.comments << @comment
<span class="linenum">49</span>    end
<span class="linenum">50</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('96.4');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should not be creatable by guests on a work&#x27;s chapter</span>
      <span class="duration">0.43223s</span>
      <div class="failure" id="failure_29">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:47:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">45</span>      @work1 = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", restricted: "true" )
<span class="linenum">46</span>      @work1.index.refresh
<span class="offending"><span class="linenum">47</span>      @comment = Comment.create(:comment)</span>
<span class="linenum">48</span>      @work1.comments << @comment
<span class="linenum">49</span>    end
<span class="linenum">50</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('96.6');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should not be readable by guests on a work</span>
      <span class="duration">0.78530s</span>
      <div class="failure" id="failure_30">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:47:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">45</span>      @work1 = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", restricted: "true" )
<span class="linenum">46</span>      @work1.index.refresh
<span class="offending"><span class="linenum">47</span>      @comment = Comment.create(:comment)</span>
<span class="linenum">48</span>      @work1.comments << @comment
<span class="linenum">49</span>    end
<span class="linenum">50</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('96.7');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should not be readable by guests on a work&#x27;s chapter</span>
      <span class="duration">0.41892s</span>
      <div class="failure" id="failure_31">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:47:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">45</span>      @work1 = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", restricted: "true" )
<span class="linenum">46</span>      @work1.index.refresh
<span class="offending"><span class="linenum">47</span>      @comment = Comment.create(:comment)</span>
<span class="linenum">48</span>      @work1.comments << @comment
<span class="linenum">49</span>    end
<span class="linenum">50</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('96.9');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should not be directly readable by guests on a work</span>
      <span class="duration">0.75227s</span>
      <div class="failure" id="failure_32">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:47:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">45</span>      @work1 = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", restricted: "true" )
<span class="linenum">46</span>      @work1.index.refresh
<span class="offending"><span class="linenum">47</span>      @comment = Comment.create(:comment)</span>
<span class="linenum">48</span>      @work1.comments << @comment
<span class="linenum">49</span>    end
<span class="linenum">50</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('97.0');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should not be directly readable by guests on a work&#x27;s chapter</span>
      <span class="duration">0.40418s</span>
      <div class="failure" id="failure_33">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:47:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">45</span>      @work1 = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", restricted: "true" )
<span class="linenum">46</span>      @work1.index.refresh
<span class="offending"><span class="linenum">47</span>      @comment = Comment.create(:comment)</span>
<span class="linenum">48</span>      @work1.comments << @comment
<span class="linenum">49</span>    end
<span class="linenum">50</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_223" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_223" class="passed">guests</dt>
  </dl>
</div>
<div id="div_group_224" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_224" class="passed">behaves like on unrestricted works</dt>
    <script type="text/javascript">makeRed('div_group_224');</script>
    <script type="text/javascript">makeRed('example_group_224');</script>
    <script type="text/javascript">moveProgressBar('97.2');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be creatable on a work</span>
      <span class="duration">0.74305s</span>
      <div class="failure" id="failure_34">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:8:in `block (2 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">6</span>      @work2 = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", restricted: "false" )
<span class="linenum">7</span>      @work2.index.refresh
<span class="offending"><span class="linenum">8</span>      @comment2 = Comment.create(:comment)</span>
<span class="linenum">9</span>      @work2.comments << @comment2
<span class="linenum">10</span>    end
<span class="linenum">11</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('97.4');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be creatable on a work&#x27;s chapter</span>
      <span class="duration">0.43028s</span>
      <div class="failure" id="failure_35">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:8:in `block (2 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">6</span>      @work2 = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", restricted: "false" )
<span class="linenum">7</span>      @work2.index.refresh
<span class="offending"><span class="linenum">8</span>      @comment2 = Comment.create(:comment)</span>
<span class="linenum">9</span>      @work2.comments << @comment2
<span class="linenum">10</span>    end
<span class="linenum">11</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('97.5');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be readable on a work</span>
      <span class="duration">0.41548s</span>
      <div class="failure" id="failure_36">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:8:in `block (2 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">6</span>      @work2 = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", restricted: "false" )
<span class="linenum">7</span>      @work2.index.refresh
<span class="offending"><span class="linenum">8</span>      @comment2 = Comment.create(:comment)</span>
<span class="linenum">9</span>      @work2.comments << @comment2
<span class="linenum">10</span>    end
<span class="linenum">11</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('97.7');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be readable on a work&#x27;s chapter</span>
      <span class="duration">0.69882s</span>
      <div class="failure" id="failure_37">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:8:in `block (2 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">6</span>      @work2 = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", restricted: "false" )
<span class="linenum">7</span>      @work2.index.refresh
<span class="offending"><span class="linenum">8</span>      @comment2 = Comment.create(:comment)</span>
<span class="linenum">9</span>      @work2.comments << @comment2
<span class="linenum">10</span>    end
<span class="linenum">11</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('97.8');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be directly readable on a work</span>
      <span class="duration">0.44217s</span>
      <div class="failure" id="failure_38">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:8:in `block (2 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">6</span>      @work2 = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", restricted: "false" )
<span class="linenum">7</span>      @work2.index.refresh
<span class="offending"><span class="linenum">8</span>      @comment2 = Comment.create(:comment)</span>
<span class="linenum">9</span>      @work2.comments << @comment2
<span class="linenum">10</span>    end
<span class="linenum">11</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('98.0');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be directly readable on a chapter</span>
      <span class="duration">0.79986s</span>
      <div class="failure" id="failure_39">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:8:in `block (2 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">6</span>      @work2 = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", restricted: "false" )
<span class="linenum">7</span>      @work2.index.refresh
<span class="offending"><span class="linenum">8</span>      @comment2 = Comment.create(:comment)</span>
<span class="linenum">9</span>      @work2.comments << @comment2
<span class="linenum">10</span>    end
<span class="linenum">11</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('98.2');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be directly readable on a work&#x27;s chapter</span>
      <span class="duration">0.43998s</span>
      <div class="failure" id="failure_40">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:8:in `block (2 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">6</span>      @work2 = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", restricted: "false" )
<span class="linenum">7</span>      @work2.index.refresh
<span class="offending"><span class="linenum">8</span>      @comment2 = Comment.create(:comment)</span>
<span class="linenum">9</span>      @work2.comments << @comment2
<span class="linenum">10</span>    end
<span class="linenum">11</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_225" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_225" class="passed">logged in users</dt>
  </dl>
</div>
<div id="div_group_226" class="example_group passed">
  <dl style="margin-left: 30px;">
  <dt id="example_group_226" class="passed">behaves like on unrestricted works</dt>
    <script type="text/javascript">makeRed('div_group_226');</script>
    <script type="text/javascript">makeRed('example_group_226');</script>
    <script type="text/javascript">moveProgressBar('98.3');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be creatable on a work</span>
      <span class="duration">0.09463s</span>
      <div class="failure" id="failure_41">
        <div class="message"><pre>undefined method `visit&#x27; for #&lt;RSpec::Core::ExampleGroup::Nested_40::Nested_3::Nested_1:0x0000000bb7fe20&gt;</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:83:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">81</span>    before do
<span class="linenum">82</span>      @user = FactoryGirl.create(:user)
<span class="offending"><span class="linenum">83</span>      visit login_path</span>
<span class="linenum">84</span>      fill_in "User name",with: "#{@user.login}"
<span class="linenum">85</span>      fill_in "Password", with: "password"
<span class="linenum">86</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('98.5');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be creatable on a work&#x27;s chapter</span>
      <span class="duration">0.07967s</span>
      <div class="failure" id="failure_42">
        <div class="message"><pre>undefined method `visit&#x27; for #&lt;RSpec::Core::ExampleGroup::Nested_40::Nested_3::Nested_1:0x0000000bcdc3e0&gt;</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:83:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">81</span>    before do
<span class="linenum">82</span>      @user = FactoryGirl.create(:user)
<span class="offending"><span class="linenum">83</span>      visit login_path</span>
<span class="linenum">84</span>      fill_in "User name",with: "#{@user.login}"
<span class="linenum">85</span>      fill_in "Password", with: "password"
<span class="linenum">86</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('98.7');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be readable on a work</span>
      <span class="duration">0.38416s</span>
      <div class="failure" id="failure_43">
        <div class="message"><pre>undefined method `visit&#x27; for #&lt;RSpec::Core::ExampleGroup::Nested_40::Nested_3::Nested_1:0x0000000c35a460&gt;</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:83:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">81</span>    before do
<span class="linenum">82</span>      @user = FactoryGirl.create(:user)
<span class="offending"><span class="linenum">83</span>      visit login_path</span>
<span class="linenum">84</span>      fill_in "User name",with: "#{@user.login}"
<span class="linenum">85</span>      fill_in "Password", with: "password"
<span class="linenum">86</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('98.8');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be readable on a work&#x27;s chapter</span>
      <span class="duration">0.08450s</span>
      <div class="failure" id="failure_44">
        <div class="message"><pre>undefined method `visit&#x27; for #&lt;RSpec::Core::ExampleGroup::Nested_40::Nested_3::Nested_1:0x0000000a9aa0d8&gt;</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:83:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">81</span>    before do
<span class="linenum">82</span>      @user = FactoryGirl.create(:user)
<span class="offending"><span class="linenum">83</span>      visit login_path</span>
<span class="linenum">84</span>      fill_in "User name",with: "#{@user.login}"
<span class="linenum">85</span>      fill_in "Password", with: "password"
<span class="linenum">86</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('99.0');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be directly readable on a work</span>
      <span class="duration">0.07883s</span>
      <div class="failure" id="failure_45">
        <div class="message"><pre>undefined method `visit&#x27; for #&lt;RSpec::Core::ExampleGroup::Nested_40::Nested_3::Nested_1:0x0000000ac0c998&gt;</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:83:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">81</span>    before do
<span class="linenum">82</span>      @user = FactoryGirl.create(:user)
<span class="offending"><span class="linenum">83</span>      visit login_path</span>
<span class="linenum">84</span>      fill_in "User name",with: "#{@user.login}"
<span class="linenum">85</span>      fill_in "Password", with: "password"
<span class="linenum">86</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('99.1');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be directly readable on a chapter</span>
      <span class="duration">0.09200s</span>
      <div class="failure" id="failure_46">
        <div class="message"><pre>undefined method `visit&#x27; for #&lt;RSpec::Core::ExampleGroup::Nested_40::Nested_3::Nested_1:0x0000000adf1088&gt;</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:83:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">81</span>    before do
<span class="linenum">82</span>      @user = FactoryGirl.create(:user)
<span class="offending"><span class="linenum">83</span>      visit login_path</span>
<span class="linenum">84</span>      fill_in "User name",with: "#{@user.login}"
<span class="linenum">85</span>      fill_in "Password", with: "password"
<span class="linenum">86</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('99.3');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should be directly readable on a work&#x27;s chapter</span>
      <span class="duration">0.09092s</span>
      <div class="failure" id="failure_47">
        <div class="message"><pre>undefined method `visit&#x27; for #&lt;RSpec::Core::ExampleGroup::Nested_40::Nested_3::Nested_1:0x0000000b0a3718&gt;</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:83:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">81</span>    before do
<span class="linenum">82</span>      @user = FactoryGirl.create(:user)
<span class="offending"><span class="linenum">83</span>      visit login_path</span>
<span class="linenum">84</span>      fill_in "User name",with: "#{@user.login}"
<span class="linenum">85</span>      fill_in "Password", with: "password"
<span class="linenum">86</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<div id="div_group_227" class="example_group passed">
  <dl style="margin-left: 15px;">
  <dt id="example_group_227" class="passed">on works which have anonymous commenting disabled</dt>
    <script type="text/javascript">makeRed('div_group_227');</script>
    <script type="text/javascript">makeRed('example_group_227');</script>
    <script type="text/javascript">moveProgressBar('99.5');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should not be creatable by guests on a work</span>
      <span class="duration">0.74906s</span>
      <div class="failure" id="failure_48">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:97:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">95</span>      @work = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", :anon_commenting_disabled => "true" )
<span class="linenum">96</span>      @work.index.refresh
<span class="offending"><span class="linenum">97</span>      @comment = Comment.create(:comment)</span>
<span class="linenum">98</span>      @work.comments << @comment
<span class="linenum">99</span>    end
<span class="linenum">100</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('99.6');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should not be creatable by guests on a work&#x27;s chapter</span>
      <span class="duration">0.44652s</span>
      <div class="failure" id="failure_49">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:97:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">95</span>      @work = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", :anon_commenting_disabled => "true" )
<span class="linenum">96</span>      @work.index.refresh
<span class="offending"><span class="linenum">97</span>      @comment = Comment.create(:comment)</span>
<span class="linenum">98</span>      @work.comments << @comment
<span class="linenum">99</span>    end
<span class="linenum">100</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('99.8');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should not be able to be replied to by guests on a work</span>
      <span class="duration">0.79993s</span>
      <div class="failure" id="failure_50">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:97:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">95</span>      @work = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", :anon_commenting_disabled => "true" )
<span class="linenum">96</span>      @work.index.refresh
<span class="offending"><span class="linenum">97</span>      @comment = Comment.create(:comment)</span>
<span class="linenum">98</span>      @work.comments << @comment
<span class="linenum">99</span>    end
<span class="linenum">100</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
    <script type="text/javascript">moveProgressBar('100.0');</script>
    <dd class="example failed">
      <span class="failed_spec_name">should not be able to be replied to by guests on a work&#x27;s chapter</span>
      <span class="duration">0.44680s</span>
      <div class="failure" id="failure_51">
        <div class="message"><pre>undefined method `stringify_keys&#x27; for :comment:Symbol</pre></div>
        <div class="backtrace"><pre>./spec/requests/comments_spec.rb:97:in `block (3 levels) in <top (required)>'</pre></div>
    <pre class="ruby"><code><span class="linenum">95</span>      @work = FactoryGirl.create(:work, :posted => true, :fandom_string => "Merlin (TV)", :anon_commenting_disabled => "true" )
<span class="linenum">96</span>      @work.index.refresh
<span class="offending"><span class="linenum">97</span>      @comment = Comment.create(:comment)</span>
<span class="linenum">98</span>      @work.comments << @comment
<span class="linenum">99</span>    end
<span class="linenum">100</span><span class="comment"># gem install syntax to get syntax highlighting</span></code></pre>
      </div>
    </dd>
  </dl>
</div>
<script type="text/javascript">document.getElementById('duration').innerHTML = "Finished in <strong>342.16239 seconds</strong>";</script>
<script type="text/javascript">document.getElementById('totals').innerHTML = "618 examples, 51 failures, 19 pending";</script>
</div>
</div>
</body>
</html>

language: ruby
cache: bundler
sudo: required
env:
  - TEST_GROUP="IGNORE=00 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=01 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=02 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=03 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=04 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=05 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=06 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=07 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=08 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=09 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=10 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=11 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=12 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=13 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=14 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=15 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=16 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=17 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=18 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=19 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=20 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=21 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=22 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=23 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=24 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=25 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=26 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=27 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=28 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - TEST_GROUP="IGNORE=29 cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color"
  - "2.2.5"
services:
  - elasticsearch
  - redis-server
  - memcached
script:
  - rm -f structure.sql
  - RAILS_ENV=test bundle exec rake db:create:all --trace
  - RAILS_ENV=test bundle exec rake db:schema:load --trace
  - RAILS_ENV=test bundle exec rake db:migrate --trace
  - bundle exec $TEST_GROUP
before_script:
  - bash script/travis_configure.sh
  - bash script/travis_elasticsearch_upgrade.sh
notifications:
  email:
    recipients:
      - otw-coders-extra@transformativeworks.org
    on_success: change
    on_failure: always
  irc:
   channels:
     - "irc.freenode.org#otw-dev"
   on_success: change
   on_failure: change

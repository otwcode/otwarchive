language: ruby
cache: bundler
sudo: required
env:
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore00"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore01"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore02"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore03"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore04"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore05"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore06"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore07"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore08"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore09"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore10"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore11"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore12"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore13"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore14"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore15"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore16"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore17"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore18"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore19"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore20"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore21"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore22"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore23"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore24"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore25"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore26"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore27"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore28"
  - TEST_GROUP="cucumber -r features features/comments_and_kudos/add_comment.feature -f Ao3Cucumber::Formatter --color --tags ~@ignore29"
  - "2.2.5"
services:
  - elasticsearch
  - redis-server
  - memcached
script:
  - rm -f structure.sql
  - RAILS_ENV=test bundle exec rake db:create:all --trace
  - RAILS_ENV=test bundle exec rake db:schema:load --trace
  - RAILS_ENV=test bundle exec rake db:migrate --trace
  - bundle exec $TEST_GROUP
before_script:
  - bash script/travis_configure.sh
  - bash script/travis_elasticsearch_upgrade.sh
notifications:
  email:
    recipients:
      - otw-coders-extra@transformativeworks.org
    on_success: change
    on_failure: always
  irc:
   channels:
     - "irc.freenode.org#otw-dev"
   on_success: change
   on_failure: change

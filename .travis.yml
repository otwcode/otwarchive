env:
  global:
    - secure: "hxowDd+uosiHCnDVhSvFvvkqbFbfqrIuwBJMOQBD8tDD+jva+Sc4Y0N1SCwj\nNpa8KRfSrpBPdw1gW8mWxg0ZOoWqAhSuCqE0Tgi827AfkRXAWwnZ+37TGjFG\n6YdWAHdJ+zaWlMYhhQzHLW0uUxNKjiuCYuDnCXlcehvYK9UXulU="
    - secure: "ME9CJoiEDFtQLVAxVYDRmBqyAHX85an2cwdo03XgC7y8bBdJ2AclJtNEt3p8\no6yNrs4aiSQoXZGelXsIZJXUr62TISNdZQdM4fFKqIN/G4mhx5hFCwMHqjyn\nJUGjAzvYc4mQnRMa2G2W2aEsXDdKMZG2K6WpUUm53GPmdqG9cpM=" 
  - TEST_GROUP=users
rvm:
  - "1.9.2-p320"
services:
  - elasticsearch
  - redis-server
  - memcache
script:
  - bundle exec rake db:create:all --trace
  - bundle exec rake db:schema:load --trace
  - RAILS_ENV=test bundle exec rake db:migrate --trace
  - bundle exec cucumber -f progress -r features features/$TEST_GROUP -b
before_script:
  - curl https://gist.github.com/santiycr/5139565/raw/sauce_connect_setup.sh | bash
  - mysql -e 'create database otwarchive_test;'
  - cp config/database.travis.yml config/database.yml
  - cp config/newrelic.example config/newrelic.yml
  - cp config/redis-cucumber.conf.example config/redis-cucumber.conf
  - cp config/redis.travis.example config/redis.yml
notifications:
  email:
    recipients:
      - otw-coders@transformativeworks.org
    on_success: change
    on_failure: always
  irc:
   channels:
     - "irc.freenode.org#otw-dev"
   on_success: always
   on_failure: always
